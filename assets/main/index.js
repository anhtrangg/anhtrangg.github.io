window.__require=function e(t,n,o){function s(r,a){if(!n[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!a&&l)return l(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var d=n[r]={exports:{}};t[r][0].call(d.exports,function(e){return s(t[r][1][e]||e)},d,d.exports,e,t,n,o)}return n[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<o.length;r++)s(o[r]);return s}({AbstractSDK:[function(e,t,n){"use strict";cc._RF.push(t,"78116Ir4gBJ0qkBSfvbVddN","AbstractSDK"),cc._RF.pop()},{}],AnglePositionCalculator:[function(e,t,n){"use strict";cc._RF.push(t,"06faduC0mtFXKjrxGntz25G","AnglePositionCalculator"),cc._RF.pop()},{}],ArrayExtensions:[function(e,t,n){"use strict";cc._RF.push(t,"deb10gMUlJG6b/vwvIvZVKB","ArrayExtensions"),Array.prototype.getRandom=function(){return this[Math.floor(Math.random()*this.length)]},Array.prototype.convertToSet=function(){let e=new Set;return this.forEach(t=>{e.add(t)}),e},Array.prototype.popRandom=function(){let e=Math.floor(Math.random()*this.length);return this.splice(e,1)[0]},cc._RF.pop()},{}],AsteroidManager:[function(e,t,n){"use strict";cc._RF.push(t,"8c0d39XbNVKxYbP3qj4yZUQ","AsteroidManager");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const s=e("../OrbitRoamingManager"),i=e("./Asteroid"),{ccclass:r,property:a}=cc._decorator;let c=(()=>{var e;let t=e=class extends s.default{static getInstance(){return this._instance}getTargetComponent(e){return e.getComponent(i.default)}onLoad(){super.onLoad(),e._instance=this}};return t._instance=null,t=e=o([r],t)})();n.default=c,cc._RF.pop()},{"../OrbitRoamingManager":"OrbitRoamingManager","./Asteroid":"Asteroid"}],Asteroid:[function(e,t,n){"use strict";cc._RF.push(t,"c80canujcpJEq9oVkstvTwj","Asteroid");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const s=e("../OrbitRoaming"),{ccclass:i,property:r}=cc._decorator;let a=(()=>{let e=class extends s.default{enableCollide(e){this.node.getComponent(cc.BoxCollider).enabled=e}initialize(e,t,n,o,s,i,r=!1,a,c){super.initialize(e,t,n,o,s,i,r,a,c),Math.randomInt(0,100)<=50?this.setDirection(1):this.setDirection(-1)}};return e=o([i],e)})();n.default=a,cc._RF.pop()},{"../OrbitRoaming":"OrbitRoaming"}],BuffEffect:[function(e,t,n){"use strict";cc._RF.push(t,"a6367pmH8hMuY7Qsg1TA0q3","BuffEffect"),Object.defineProperty(n,"__esModule",{value:!0}),n.BuffEffect=void 0;const o=e("../../hcg-core/sdk/SdkFunctions"),s=e("./BuffManagerBase");n.BuffEffect=class{constructor(e,t){this.Index=s.default.generateId(),this.Owner=t,this._maxCooldown=e}getReplaceable(){return!1}getMaxCooldownInSeconds(){return this._maxCooldown}getMaxCooldownInMiliSeconds(){return 1e3*this._maxCooldown}getCooldownInSeconds(){return(this._endTime-o.default.getInstance().getTick())/1e3}getCooldownInMiliseconds(){return this._endTime-o.default.getInstance().getTick()}apply(){return 1==this.Owner.tryAddBuff(this)&&(this._activeTime=o.default.getInstance().getTick(),this._endTime=this._activeTime+1e3*this._maxCooldown,this.doApply(),!0)}remove(){1==this.Owner.tryRemoveBuff(this)&&this.doRemove()}stack(e){this._endTime=this._endTime+1e3*e._maxCooldown}replace(e){this._activeTime=o.default.getInstance().getTick(),this._endTime=this._activeTime+1e3*e._maxCooldown}},cc._RF.pop()},{"../../hcg-core/sdk/SdkFunctions":"SdkFunctions","./BuffManagerBase":"BuffManagerBase"}],BuffManagerBase:[function(e,t,n){"use strict";cc._RF.push(t,"293f93l7v9Ky71uNQClrpXr","BuffManagerBase");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.SpawnCommandData=void 0;const s=e("../../hcg-core/sdk/SdkFunctions"),i=e("./BuffTarget"),r=e("./StatusIcon"),{ccclass:a,property:c}=cc._decorator;n.SpawnCommandData=class{constructor(e,t,n){this.target=e,this.itemType=t,this.metadata=n}};let l=(()=>{var e;let t=e=class extends cc.Component{constructor(){super(...arguments),this.multipleEffects=!0,this.statuses=new Array,this.itemSprites=new Array,this._playerContainers=new Array,this._outdateIntervalCheck=100,this._lastOutdateCheckTick=0}static getInstance(){return this._instance}static generateId(){return this._idGenerator++}getContainer(e){for(var t=0;t<this._playerContainers.length;t++)if(this._playerContainers[t].Owner==e)return this._playerContainers[t];return null}onLoad(){e._idGenerator=0,e._instance=this;const t=this.getPlayerControllers();for(var n=0;n<t.length;n++)this._playerContainers.push(new i.BuffTarget(t[n]));this.statuses.forEach(e=>{e.node.active=!1}),s.default.getInstance().registerEvent(s.default.KEY_SPAWN_STATUS_ITEM,e=>this.receive_command_KEY_SPAWN_STATUS_ITEM(e))}start(){}onDestroy(){}update(){const e=s.default.getInstance().getTick();if(e-this._lastOutdateCheckTick>=this._outdateIntervalCheck){this._lastOutdateCheckTick=e;for(var t=0;t<this._playerContainers.length;t++){const e=this._playerContainers[t];1==e.hasBuffs()&&(this.removeOutdateEffects(e),1==this.isThisPlayerController(e.Owner)&&this.statuses.forEach(t=>{const n=e.getStatus(t.itemType);null==n?t.node.active=!1:(t.node.active=!0,t.setTime(n.totalTime,n.remainTime))}))}}}getItemSprite(e){for(var t=0;t<this.itemSprites.length;t++)if(e==t)return this.itemSprites[t]}spawnItem(e,t,n){if(null==e)return-1;const o=this.getContainer(e);if(0==this.multipleEffects&&this.isBuff(t)&&1==o.hasBuffs())return-1;if(1==s.default.getInstance().isRealTimeMultiplayer()){const o=this.serializeCommandData(e,t,n);s.default.getInstance().sendP2PMessage(s.default.KEY_SPAWN_STATUS_ITEM,{spawnInfo:o})}return this.doSpawnItem(e,t,n)}spawnRandomlyItem(e,t){if(null==e)return-1;if(0==s.default.getInstance().isSpawner())return-1;const n=this.getRandomItemId();return this.spawnItem(e,n,t)}doSpawnItem(e,t,n){if(null==e)return-1;const o=this.getContainer(e),s=this.createEffect(o,t,n);return null!=s&&s.apply()?t:-1}receive_command_KEY_SPAWN_STATUS_ITEM(e){if(null==e)return;const t=this.deserializeCommandData(e.spawnInfo);this.doSpawnItem(t.target,t.itemType,e.metadata)}removeOutdateEffects(e){let t=e.getOutdateEffects();if(null!=t)for(var n of t)n.remove()}};return t._instance=null,t._idGenerator=0,o([c],t.prototype,"multipleEffects",void 0),o([c([r.default])],t.prototype,"statuses",void 0),o([c([cc.SpriteFrame])],t.prototype,"itemSprites",void 0),t=e=o([a],t)})();n.default=l,cc._RF.pop()},{"../../hcg-core/sdk/SdkFunctions":"SdkFunctions","./BuffTarget":"BuffTarget","./StatusIcon":"StatusIcon"}],BuffManager:[function(e,t,n){"use strict";cc._RF.push(t,"1c96eU1jhtPx6h05HxGYPB+","BuffManager");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ItemType=void 0;const s=e("../../hcg-core/BuffSystem/BuffManagerBase"),i=e("../GameController"),r=e("../Ship"),a=e("./ImplementEffects"),{ccclass:c,property:l}=cc._decorator;var d;(function(e){e[e.NONE=0]="NONE",e[e.HOMING_MISSILE=1]="HOMING_MISSILE",e[e.ORBIT_BOOM=2]="ORBIT_BOOM",e[e.FRENZY_MODE=3]="FRENZY_MODE",e[e.SPAWN_ASTEROID=4]="SPAWN_ASTEROID",e[e.DECS_MONSTER_SIZE_X2=5]="DECS_MONSTER_SIZE_X2",e[e.INC_MONSTER_SPEED_X2=6]="INC_MONSTER_SPEED_X2"})(d=n.ItemType||(n.ItemType={}));let h=(()=>{let e=class extends s.default{constructor(){super(...arguments),this.controller=null,this.player=null}static getInstance(){return s.default.getInstance()}getPlayerControllers(){return[this.player]}isThisPlayerController(e){return e==this.player}serializeCommandData(e,t,n){return{itemType:t,metadata:n}}deserializeCommandData(e){return new s.SpawnCommandData(this.player,e.itemType,e.metadata)}isBuff(e){switch(e){case d.FRENZY_MODE:case d.DECS_MONSTER_SIZE_X2:case d.INC_MONSTER_SPEED_X2:return!0}return!1}getItemTypeName(e){switch(e){case d.HOMING_MISSILE:return"HOMMING MISSIBLE";case d.ORBIT_BOOM:return"ORBIT BOMB";case d.FRENZY_MODE:return"FRENZY MODE";case d.SPAWN_ASTEROID:return"ASTEROID";case d.DECS_MONSTER_SIZE_X2:return"MONSTER SIZE";case d.INC_MONSTER_SPEED_X2:}return""}getRandomItemId(){const e=Math.randomInt(0,1001);var t=0;return e<=200?t=d.HOMING_MISSILE:e<=300?t=d.ORBIT_BOOM:e<=600?t=d.FRENZY_MODE:e<=700?t=d.SPAWN_ASTEROID:e<=900?t=d.DECS_MONSTER_SIZE_X2:e<=1e3&&(t=d.INC_MONSTER_SPEED_X2),t}createEffect(e,t,n){switch(t){case d.HOMING_MISSILE:return new a.Instant_HOMING_MISSILE(e);case d.ORBIT_BOOM:return new a.Instant_ORBIT_BOOM(e);case d.FRENZY_MODE:return new a.BUFF_FRENZY_MODE(3,e);case d.SPAWN_ASTEROID:return new a.Instant_SPAWN_ASTEROID(e,n.angle,n.radius);case d.DECS_MONSTER_SIZE_X2:return new a.BUFF_DECS_MONSTER_SIZE_X2(5,e);case d.INC_MONSTER_SPEED_X2:return new a.BUFF_INC_MONSTER_SPEED_X2(5,e)}return null}};return o([l(i.default)],e.prototype,"controller",void 0),o([l(r.default)],e.prototype,"player",void 0),e=o([c],e)})();n.default=h,cc._RF.pop()},{"../../hcg-core/BuffSystem/BuffManagerBase":"BuffManagerBase","../GameController":"GameController","../Ship":"Ship","./ImplementEffects":"ImplementEffects"}],BuffTarget:[function(e,t,n){"use strict";cc._RF.push(t,"20b6e2H2plHWou5QRWxJwYn","BuffTarget"),Object.defineProperty(n,"__esModule",{value:!0}),n.BuffTarget=n.BuffStatus=void 0;class o{constructor(){this.itemType=0,this.remainTime=0,this.totalTime=1}}n.BuffStatus=o;n.BuffTarget=class{constructor(e){this.Owner=null,this._buffs=new Array,this.Owner=e}hasBuffs(){return this._buffs.length>0}getStatuses(){const e=new Array;return this._buffs.forEach(t=>{const n=new o;n.itemType=t.EffectId,n.remainTime=t.getCooldownInMiliseconds(),n.totalTime=t.getMaxCooldownInMiliSeconds(),e.push(n)}),e}getStatus(e){for(var t=0;t<this._buffs.length;t++){const n=this._buffs[t];if(n.EffectId==e){const e=new o;return e.itemType=n.EffectId,e.remainTime=n.getCooldownInMiliseconds(),e.totalTime=n.getMaxCooldownInMiliSeconds(),e}}return null}tryAddBuff(e){if(null==e)return!1;let t=null;for(var n of this._buffs)if(n.EffectId==e.EffectId){t=n;break}return null!=t?1==e.getReplaceable()?(t.replace(e),!1):0!=e.IsStack&&(t.stack(e),!1):(this._buffs.push(e),!0)}tryRemoveBuff(e){if(null==e)return!1;for(let t=0;t<this._buffs.length;t++)if(this._buffs[t].EffectId==e.EffectId)return this._buffs.splice(t,1),!0;return!1}getOutdateEffects(){if(0==this._buffs.length)return null;var e=new Array;for(let t=0;t<this._buffs.length;t++)this._buffs[t].getCooldownInMiliseconds()<=0&&e.push(this._buffs[t]);return e}addInstant(e){}getEffectByType(e){if(0==this._buffs.length)return null;for(let t=0;t<this._buffs.length;t++)if(this._buffs[t].EffectId==e)return this._buffs[t];return null}},cc._RF.pop()},{}],Bullet:[function(e,t,n){"use strict";cc._RF.push(t,"3fbf3ltrFtP95v9GydM5PBG","Bullet");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const s=e("../hcg-core/Sound/SoundManager"),i=e("./GameController"),r=e("./HommingMissbleDirections"),a=e("./OrbitManager/Asteroid"),c=e("./OrbitManager/AsteroidManager"),l=e("./OrbitManager/ChickenShip"),d=e("./OrbitManager/ChickenShipManager"),h=e("./OrbitManager/Minion"),u=e("./OrbitManager/MinionRoamingManager"),{ccclass:p,property:_}=cc._decorator;let f=(()=>{var e;let t=e=class extends cc.Component{constructor(){super(...arguments),this.bulletSFX=null,this.miniontSFX=null,this.globeSFX=null,this.bulletTexture=null,this.bulletTrail=null,this.bulletExplodeFX=null,this.hasHit=!1,this.fenzyMode=!1,this.hommingMissble=!1,this.chaseIndex=-1,this.directionIdex=-1}initialize(){1==this.hommingMissble&&(this.hommingDirections=r.default.getInstance().getPositions(this.chaseIndex))}start(){s.default.getInstance().playSound(this.bulletSFX,!1),1==this.hommingMissble&&(this.directionIdex=0,this.moveHommingBullet()),this.lastPosition=this.node.position}moveHommingBullet(){if(this.directionIdex>=0&&this.directionIdex<this.hommingDirections.length){const t=this.node.parent.convertToNodeSpaceAR(this.hommingDirections[this.directionIdex]),n=t.sub(this.node.position).mag()/e.BULLET_SPEED;cc.tween(this.node).to(n,{position:t}).start(),this.directionIdex++,this.directionIdex>=0&&this.directionIdex<this.hommingDirections.length&&cc.tween(this.node).delay(n).call(()=>this.moveHommingBullet()).start()}}onCollisionEnter(e,t){if(!i.default.getInstance().isGameOver&&!this.hasHit)if(0==this.hommingMissble){if(e.name.toLowerCase().includes("minion"))u.default.getInstance().onHitBullet(e.node.getComponent(h.default));else if(e.name.toLowerCase().includes("globe")){if(0==this.fenzyMode){s.default.getInstance().playSound(this.globeSFX,!1);const e=i.default.getInstance();e.scoreController.deductScore(),e.recorder.recordHitGlobe(e.getElapseTime())}}else if(e.name.toLowerCase().includes("asteroid")){const t=e.node.getComponent(a.default);c.default.getInstance().onHitBullet(t)}else if(e.name.toLowerCase().includes("chickenship")){const t=e.node.getComponent(l.default);d.default.getInstance().onHitBullet(t)}this.hasHit=!0,this.node.destroy()}else{var n=null;if(e.name.toLowerCase().includes("minion"))this.hasHit=!0,n=e.node.getComponent(h.default);else if(e.name.toLowerCase().includes("globe")){this.hasHit=!0;const e=u.default.getInstance().getAgents();if(null!=e&&e.length>0){var o=1e6;const t=this.node.parent.convertToWorldSpaceAR(this.node.position);for(var r=0;r<e.length;r++){const s=e[r].node.parent.convertToWorldSpaceAR(e[r].node.position).sub(t).mag();s<o&&(n=e[r],o=s)}}}1==this.hasHit&&(s.default.getInstance().playSound(this.globeSFX,!1),this.bulletExplodeFX.play("animation"),this.node.stopAllActions(),this.bulletTrail.active=!1,this.bulletTexture.active=!1,cc.tween(this.node).delay(.5).call(()=>{this.node.destroy()}).start(),null!=n&&u.default.getInstance().onHitBullet(n))}}update(t){if(this.node.lookAt(cc.Vec3.ZERO,this.node.up),0==this.hommingMissble){var n=this.node.position;n.y+=e.BULLET_SPEED*t,this.node.setPosition(n)}else{if(1==this.hasHit)return;if(this.node.position.x!=this.lastPosition.x||this.node.position.y!=this.lastPosition.y){const e=this.node.position.sub(this.lastPosition).normalize();this.lastPosition=this.node.position;var o=Math.atan2(e.x,e.y);this.node.rotation=cc.misc.radiansToDegrees(o)}}}};return t.BULLET_SPEED=2e3,o([_({type:cc.AudioClip})],t.prototype,"bulletSFX",void 0),o([_({type:cc.AudioClip})],t.prototype,"miniontSFX",void 0),o([_({type:cc.AudioClip})],t.prototype,"globeSFX",void 0),o([_(cc.Node)],t.prototype,"bulletTexture",void 0),o([_(cc.Node)],t.prototype,"bulletTrail",void 0),o([_(cc.Animation)],t.prototype,"bulletExplodeFX",void 0),t=e=o([p],t)})();n.default=f,cc._RF.pop()},{"../hcg-core/Sound/SoundManager":"SoundManager","./GameController":"GameController","./HommingMissbleDirections":"HommingMissbleDirections","./OrbitManager/Asteroid":"Asteroid","./OrbitManager/AsteroidManager":"AsteroidManager","./OrbitManager/ChickenShip":"ChickenShip","./OrbitManager/ChickenShipManager":"ChickenShipManager","./OrbitManager/Minion":"Minion","./OrbitManager/MinionRoamingManager":"MinionRoamingManager"}],CanvasMultiResoSupport:[function(e,t,n){"use strict";cc._RF.push(t,"bbadfzUTVZCrqtOLTaLN0Uj","CanvasMultiResoSupport");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const{ccclass:s,property:i}=cc._decorator;let r=(()=>{let e=class extends cc.Component{constructor(){super(...arguments),this.container=null,this.count=0}onLoad(){this.container.active=!1;let e=cc.view.getFrameSize(),t=e.width,n=e.height,o=this.node.getComponent(cc.Canvas);t/n>=o.designResolution.width/o.designResolution.height?(o.fitWidth=!1,o.fitHeight=!0):(o.fitWidth=!0,o.fitHeight=!1)}update(){this.count>=0&&(this.count++,2==this.count&&(this.container.active=!0,this.count=-1))}};return o([i(cc.Node)],e.prototype,"container",void 0),e=o([s],e)})();n.default=r,cc._RF.pop()},{}],ChickenShipManager:[function(e,t,n){"use strict";cc._RF.push(t,"b4d4fnweD1IsKwrZTR2iSp3","ChickenShipManager");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const s=e("../BuffSystem/BuffManager"),i=e("../ItemAlertContainer"),r=e("../OrbitRoamingManager"),a=e("./AsteroidManager"),c=e("./ChickenShip"),{ccclass:l,property:d}=cc._decorator;let h=(()=>{var e;let t=e=class extends r.default{constructor(){super(...arguments),this.itemAlert=null}static getInstance(){return this._instance}getTargetComponent(e){return e.getComponent(c.default)}onLoad(){super.onLoad(),e._instance=this}onHitBullet(e){const t=e.node.angle,n=this.getOrbitRadius(),o=super.onHitBullet(e);if(1==o){const e=s.default.getInstance().getRandomItemId();e==s.ItemType.SPAWN_ASTEROID&&s.default.getInstance().spawnItem(s.default.getInstance().player,e,{angle:t,radius:n}),a.default.getInstance().spawnAtPosition(3,t,15,n),this.itemAlert.showItemAlertEffect(e,()=>{e!=s.ItemType.SPAWN_ASTEROID&&s.default.getInstance().spawnItem(s.default.getInstance().player,e,{angle:t,radius:n})})}return o}};return o([d(i.default)],t.prototype,"itemAlert",void 0),t=e=o([l],t)})();n.default=h,cc._RF.pop()},{"../BuffSystem/BuffManager":"BuffManager","../ItemAlertContainer":"ItemAlertContainer","../OrbitRoamingManager":"OrbitRoamingManager","./AsteroidManager":"AsteroidManager","./ChickenShip":"ChickenShip"}],ChickenShip:[function(e,t,n){"use strict";cc._RF.push(t,"fc6b0s4979JZKBJH14du8aL","ChickenShip");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const s=e("../GameController"),i=e("../OrbitRoaming"),{ccclass:r,property:a}=cc._decorator;let c=(()=>{let e=class extends i.default{enableCollide(e){this.node.getComponent(cc.BoxCollider).enabled=e}update(e){super.update(e),-1*this.getDirection()!=s.default.getInstance().globeController.currentGlobeDirection&&this.setDirection(-1*s.default.getInstance().globeController.currentGlobeDirection)}initialize(e,t,n,o,s,i,r=!1,a,c){super.initialize(e,t,n,o,s,i,r,a,c);const l=this.getFlyInAndOutTime(),d=Math.randomInt(5,11)+l;cc.tween(this.node).delay(d).call(()=>{null!=this&&null!=this.node&&(this.node.getComponent(cc.BoxCollider).enabled=!1,this.setFlyOutToSpace())}).delay(l).call(()=>{null!=this&&null!=this.node&&this.node.destroy()}).start()}};return e=o([r],e)})();n.default=c,cc._RF.pop()},{"../GameController":"GameController","../OrbitRoaming":"OrbitRoaming"}],EmoticonController:[function(e,t,n){"use strict";cc._RF.push(t,"75f2ajScqRHT5tyZpvOjNTp","EmoticonController");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const s=e("../sdk/SdkFunctions"),i=e("./PlayerEmoticons"),{ccclass:r,property:a}=cc._decorator;var c;(function(e){e[e.NONE=0]="NONE",e[e.DOWNLOADING=1]="DOWNLOADING",e[e.DOWNLOADED=2]="DOWNLOADED"})(c||(c={}));let l=(()=>{var e;let t=e=class extends cc.Component{constructor(){super(...arguments),this.playerEmoticons=null,this.opponentEmoticons=null,this.emoticonButtons=new Array,this.emoticonBundle="https://h5game.gogame.net/core/b3/remote/hcg_emoticons",this._downloadStatus=c.NONE,this._emoticonPrefabs=[null,null,null,null],this._onloadedHandlers=new Array,this.emoticonEnable=!0}static getInstance(){return this.instance}onLoad(){if(e.instance=this,1==gpSDK.isSinglePlayer())for(var t of(this.playerEmoticons.node.active=!1,this.opponentEmoticons.node.active=!1,this.emoticonButtons))t.node.active=!1;else for(var n in s.default.getInstance().registerEvent(s.default.KEY_EMOTICON,t=>e.instance.showOpponentEmoticon(t)),this.emoticonButtons){const e=parseInt(n),t=this.emoticonButtons[e];var o=new cc.Component.EventHandler;o.target=this.node,o.component="EmoticonController",o.handler="onClickEmoticon",o.customEventData=e.toString(),t.clickEvents.push(o)}}start(){this.downloadEmoticons()}onDestroy(){if(1==gpSDK.isSinglePlayer());else for(var e in this.emoticonButtons){const n=parseInt(e),o=this.emoticonButtons[n];var t=new cc.Component.EventHandler;t.target=this.node,t.component="EmoticonController",t.handler="onClickEmoticon",t.customEventData=n.toString(),o.clickEvents.slice(0,o.clickEvents.length)}}showOpponentEmoticon(e){0!=this.emoticonEnable&&null!=e&&this.opponentEmoticons.showEmoticon(e.iconId)}showSelfEmoticon(e){0!=this.emoticonEnable&&(s.default.getInstance().sendP2PMessage(s.default.KEY_EMOTICON,{iconId:e}),this.playerEmoticons.showEmoticon(e))}onClickEmoticon(e,t){if(0!=this.emoticonEnable&&null!=t){const e=parseInt(t);this.showSelfEmoticon(e)}}downloadEmoticons(){if(this._downloadStatus!=c.NONE)return;this._downloadStatus=c.DOWNLOADING;const e=this;cc.assetManager.loadBundle(this.emoticonBundle,(t,n)=>{n.load("Prefabs/Emoticon_0",cc.Prefab,function(t,n){e.pushEmoticon(0,t,n)}),n.load("Prefabs/Emoticon_1",cc.Prefab,function(t,n){e.pushEmoticon(1,t,n)}),n.load("Prefabs/Emoticon_2",cc.Prefab,function(t,n){e.pushEmoticon(2,t,n)}),n.load("Prefabs/Emoticon_3",cc.Prefab,function(t,n){e.pushEmoticon(3,t,n)})})}pushEmoticon(e,t,n){null!=n?(this._emoticonPrefabs[e]=n,this.checkIfDownloadedIcons()):console.log("@@=> failed to load emoticon "+e+": "+t)}checkIfDownloadedIcons(){for(var e=0;e<this._emoticonPrefabs.length;e++)if(null==this._emoticonPrefabs[e])return;if(this._downloadStatus=c.DOWNLOADED,this._onloadedHandlers.length>0)for(e=0;e<this._onloadedHandlers.length;e++)null!=this._onloadedHandlers[e]&&this._onloadedHandlers[e]();return!0}onEmoticonLoaded(e){this._onloadedHandlers.push(e),this._downloadStatus==c.DOWNLOADED&&e()}getIconPrefab(e){return this._downloadStatus!=c.DOWNLOADED||e<0||e>=this._emoticonPrefabs.length?null:this._emoticonPrefabs[e]}};return t.instance=null,o([a(i.default)],t.prototype,"playerEmoticons",void 0),o([a(i.default)],t.prototype,"opponentEmoticons",void 0),o([a([cc.Button])],t.prototype,"emoticonButtons",void 0),o([a],t.prototype,"emoticonBundle",void 0),t=e=o([r],t)})();n.default=l,cc._RF.pop()},{"../sdk/SdkFunctions":"SdkFunctions","./PlayerEmoticons":"PlayerEmoticons"}],FPSHUD:[function(e,t,n){"use strict";cc._RF.push(t,"ab267W2gg9F+IrFrXlp3Tuw","FPSHUD");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const{ccclass:s,property:i}=cc._decorator;let r=(()=>{let e=class extends cc.Component{constructor(){super(...arguments),this.showFps=!1,this.fpsLabel=null,this._frameCount=0,this._frameDt=0,this._fps=0,this._updateRateSeconds=2}onLoad(){null==this.fpsLabel?this.showFps=!1:this.fpsLabel.string=""}update(e){1==this.showFps&&(this._frameCount++,this._frameDt+=e,this._frameDt>1/this._updateRateSeconds&&(this._fps=this._frameCount/this._frameDt,this._frameCount=0,this._frameDt-=1/this._updateRateSeconds,this.fpsLabel.string="fps: "+Math.round(this._fps),this._fps>=28?this.fpsLabel.node.color=cc.Color.GREEN:this._fps>=24?this.fpsLabel.node.color=cc.Color.YELLOW:this.fpsLabel.node.color=cc.Color.RED))}};return o([i],e.prototype,"showFps",void 0),o([i(cc.Label)],e.prototype,"fpsLabel",void 0),e=o([s],e)})();n.default=r,cc._RF.pop()},{}],FillScreen:[function(e,t,n){"use strict";cc._RF.push(t,"cf9a0rICe9OqZZzxlKa/1j0","FillScreen");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const{ccclass:s,property:i}=cc._decorator;let r=(()=>{let e=class extends cc.Component{onLoad(){}};return e=o([s],e)})();n.default=r,cc._RF.pop()},{}],GameConfig:[function(e,t,n){"use strict";cc._RF.push(t,"73103rOSW1J9JVFasdo5Gjk","GameConfig");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const{ccclass:s,property:i}=cc._decorator;let r=(()=>{let e=class extends cc.Component{};return e=o([s],e)})();n.default=r,cc._RF.pop()},{}],GameController:[function(e,t,n){"use strict";cc._RF.push(t,"c4fc0rp7GJIvZEn7C2cHI89","GameController");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const s=e("../hcg-core/sdk/SdkFunctions"),i=e("../hcg-core/Sound/SoundManager"),r=e("../hcg-core/UI/HCG_GameController"),a=e("../hcg-core/UI/HCG_GameManager"),c=e("../hcg-core/utilities/Utils"),l=e("./Globe"),d=e("./OrbitManager/AsteroidManager"),h=e("./OrbitManager/ChickenShipManager"),u=e("./OrbitManager/MinionRoamingManager"),p=e("./ScoreController"),_=e("./Ship"),{ccclass:f,property:g}=cc._decorator;let m=(()=>{var e;let t=e=class extends r.default{constructor(){super(...arguments),this.globeController=null,this.hintUI=null,this.alertNode=null,this.chickenSFX=null,this.audio_BGM=null,this.label_Exit=null,this.button_Exit=null,this.endGameRaycast=null,this.scoreController=null,this.timer=90,this.isGameOver=!1,this.gameStarted=!1,this._startTime=0,this._totalPauseTime=0,this._pauseAtTick=-1,this.isOnFenzyMode=!1,this._autoShootInterval=.15,this._lastShootTime=0,this.recorder=null}static getInstance(){return this._instance}onLoad(){super.onLoad(),e._instance=this,this.recorder=recorderFactory.createPewPewPewRecorder(),cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0,this.scoreController=this.getComponent(p.default)}update(e){1==this.isOnFenzyMode&&(this._lastShootTime-=e,this._lastShootTime<=0&&(this._lastShootTime=this._autoShootInterval,_.default.getInstance().shoot()))}onDestroy(){c.default.resetIdGenerator()}getElapseTime(){return 0==this.gameStarted?0:-1!=this._pauseAtTick?s.default.getInstance().getTick()-this._startTime-this._totalPauseTime-(s.default.getInstance().getTick()-this._pauseAtTick):s.default.getInstance().getTick()-this._startTime-this._totalPauseTime}getRemainTime(){return 9e4-this.getElapseTime()}getElapseTimeInSeconds(){return.001*this.getElapseTime()}getRemainTimeInSeconds(){return 90-this.getElapseTimeInSeconds()}startGame(){super.startGame(),this.gameStarted=!0,this._startTime=s.default.getInstance().getTick(),this.recorder.recordStartGame(this.getElapseTime()),this.schedule(this.timerCount,1)}endGame(){this.unschedule(this.timerCount),this.recorder.recordEndGame(this.getElapseTime());const e=this.recorder.exportEvents();s.default.getInstance().SetGameStateData(e),a.default.instance.triggerGameOver(),this.endGameRaycast.active=!0,d.default.getInstance().collectAndStop(),u.default.getInstance().collectAndStop(),h.default.getInstance().collectAndStop()}pauseGame(){this._pauseAtTick=s.default.getInstance().getTick(),super.pauseGame()}resumeGame(){super.resumeGame(),-1!=this._pauseAtTick&&(this._totalPauseTime=s.default.getInstance().getTick()-this._pauseAtTick,this._pauseAtTick=-1)}OnFinalScoreUpdated(){this.label_Exit.string="Tap the screen to Exit",this.button_Exit.interactable=!0}timerCount(){this.getElapseTime()>=5e3&&1==this.hintUI.active&&(this.hintUI.active=!1),this.timer--,a.default.instance.gameUIScript.updateTimerLabel(this.getRemainTimeInSeconds()),(this.timer<=0||this.getRemainTimeInSeconds()<=0)&&(this.isGameOver=!0,this.endGame()),33!=this.timer&&63!=this.timer||(i.default.getInstance().playSound(this.chickenSFX,!1),this.alertNode.getComponent(cc.Animation).play()),30!=this.timer&&60!=this.timer||this.globeController.changeDirection()}};return t._instance=null,o([g(l.default)],t.prototype,"globeController",void 0),o([g(cc.Node)],t.prototype,"hintUI",void 0),o([g(cc.Node)],t.prototype,"alertNode",void 0),o([g(cc.AudioClip)],t.prototype,"chickenSFX",void 0),o([g({type:cc.AudioClip})],t.prototype,"audio_BGM",void 0),o([g(cc.Label)],t.prototype,"label_Exit",void 0),o([g(cc.Button)],t.prototype,"button_Exit",void 0),o([g(cc.Node)],t.prototype,"endGameRaycast",void 0),t=e=o([f],t)})();n.default=m,cc._RF.pop()},{"../hcg-core/Sound/SoundManager":"SoundManager","../hcg-core/UI/HCG_GameController":"HCG_GameController","../hcg-core/UI/HCG_GameManager":"HCG_GameManager","../hcg-core/sdk/SdkFunctions":"SdkFunctions","../hcg-core/utilities/Utils":"Utils","./Globe":"Globe","./OrbitManager/AsteroidManager":"AsteroidManager","./OrbitManager/ChickenShipManager":"ChickenShipManager","./OrbitManager/MinionRoamingManager":"MinionRoamingManager","./ScoreController":"ScoreController","./Ship":"Ship"}],GameElapasedTime:[function(e,t,n){"use strict";cc._RF.push(t,"93e8cWmrA5Bm4YpFrHO07kr","GameElapasedTime"),Object.defineProperty(n,"__esModule",{value:!0});const o=e("./SdkFunctions");let s=(()=>{class e{constructor(){this._startAt=0,this._isStarted=!1,this._pauseAtTick=-1,this._totalPauseTime=0}static getInstance(){return null==this._instance&&(this._instance=new e),this._instance}static get ElapseTime(){return this.getInstance().getElapseTime()}static get ElapseTimeInSeconds(){return this.getInstance().getElapseTimeInSeconds()}start(){this._startAt=o.default.getInstance().getTick(),this._isStarted=!0}beforePause(){0!=this._isStarted&&(this._pauseAtTick=o.default.getInstance().getTick())}afterResume(){0!=this._isStarted&&(this._totalPauseTime=this._totalPauseTime+(o.default.getInstance().getTick()-this._pauseAtTick),this._pauseAtTick=-1)}getElapseTime(){return 0==this._isStarted?0:-1!=this._pauseAtTick?this._startAt-this._totalPauseTime+this._pauseAtTick:o.default.getInstance().getTick()-this._startAt-this._totalPauseTime}getElapseTimeInSeconds(){return.001*this.getElapseTime()}}return e._instance=null,e})();n.default=s,cc._RF.pop()},{"./SdkFunctions":"SdkFunctions"}],Globe:[function(e,t,n){"use strict";cc._RF.push(t,"83149mfIhRIvrq/Hr0MEpv7","Globe");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const s=e("./OrbitManager/MinionRoamingManager"),{ccclass:i,property:r}=cc._decorator;let a=(()=>{var e;let t=e=class extends cc.Component{constructor(){super(...arguments),this.globeRadius=0,this.currentGlobeDirection=1}static getInstance(){return this._instance}onLoad(){e._instance=this,this.globeRadius=this.node.getContentSize().width/2}initialize(){}changeDirection(){this.currentGlobeDirection*=-1,s.default.getInstance().changeDirection()}update(e){}};return t=e=o([i],t)})();n.default=a,cc._RF.pop()},{"./OrbitManager/MinionRoamingManager":"MinionRoamingManager"}],HCG_CountdownToStart:[function(e,t,n){"use strict";cc._RF.push(t,"3a038WqGCFCBJ/Kk305S5kk","HCG_CountdownToStart");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r},s=this&&this.__awaiter||function(e,t,n,o){function s(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function r(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?n(e.value):s(e.value).then(r,a)}c((o=o.apply(e,t||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../Sound/SoundManager"),{ccclass:r,property:a}=cc._decorator;let c=(()=>{let e=class extends cc.Component{constructor(){super(...arguments),this.labelTimeCoundown=null,this.textFinal="Start!",this.isCountDown=!1}playCountdown(e=4){return s(this,void 0,void 0,function*(){this.node.active=!0;let t=e;return new Promise((n,o)=>{const s=function(){e--;let o=0;if(o=this.isCountDown?e:t-e,0==e?(this.labelTimeCoundown.node.opacity=255,i.default.getInstance().PlayCountDownStartSFX(),this.labelTimeCoundown.string=this.textFinal):-1!=e&&(i.default.getInstance().PlayCountDownNumberSFX(),this.labelTimeCoundown.node.opacity=255,this.labelTimeCoundown.string=o.toString(),cc.tween(this.labelTimeCoundown.node).to(.5,{opacity:0}).start()),-1==e)return this.node.active=!1,n("done"),void this.unschedule(s)};this.schedule(s,1)})})}};return o([a(cc.Label)],e.prototype,"labelTimeCoundown",void 0),o([a],e.prototype,"textFinal",void 0),o([a],e.prototype,"isCountDown",void 0),e=o([r],e)})();n.default=c,cc._RF.pop()},{"../Sound/SoundManager":"SoundManager"}],HCG_GameController:[function(e,t,n){"use strict";cc._RF.push(t,"fef9c5Z9JpEB5ZX0CQpS/Xa","HCG_GameController");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r},s=this&&this.__awaiter||function(e,t,n,o){function s(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function r(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?n(e.value):s(e.value).then(r,a)}c((o=o.apply(e,t||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../sdk/SdkFunctions"),r=e("./HCG_UIController"),{ccclass:a,property:c}=cc._decorator;let l=(()=>{let e=class extends cc.Component{onLoad(){}start(){}startGame(){}pauseGame(){cc.director.pause()}resumeGame(){cc.director.resume()}abortGame(){i.default.getInstance().abortGame()}setDefault(){}afterTimeUpEvent(){}MP_Host_AssignNetworkedNodes(){return[]}MP_Client_AssignNetworkNodes(e){}MP_OnInitializeNetworkedNode(e){return null}receive_command_KEY_NETWORK_NODE_REQUEST_DESTROY(e){}InitializeGameWorldOnCooldown(){return null}ReceiveCommandInitializeGameWorlOnCooldown(e){}OnOpponentScoreUpdated(e,t){}showCooldownWaitingForOpponent(e){r.default.getInstance().showCooldownWaitingForOpponent(e)}showCooldownToStart(){return s(this,void 0,void 0,function*(){yield r.default.getInstance().showCountdown2Start()})}};return e=o([a],e)})();n.default=l,cc._RF.pop()},{"../sdk/SdkFunctions":"SdkFunctions","./HCG_UIController":"HCG_UIController"}],HCG_GameManager:[function(e,t,n){"use strict";cc._RF.push(t,"cdb20J7IgpEyI3nGqiKjSCF","HCG_GameManager");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r},s=this&&this.__awaiter||function(e,t,n,o){function s(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function r(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?n(e.value):s(e.value).then(r,a)}c((o=o.apply(e,t||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../sdk/ISDKHandler"),r=e("../sdk/SdkFunctions"),a=e("./HCG_GameController"),c=e("./HCG_UIController"),{ccclass:l,property:d}=cc._decorator;let h=(()=>{var e;let t=e=class extends i.default{constructor(){super(...arguments),this.opponentData=null,this.playerData=null,this.host="https://h5game.gogame.net/",this.gameControllerScript=null,this.gameUIScript=null}OnOpponentUpdated(e){this.opponentData=e,this.gameUIScript.OnOpponentUpdated(e)}OnOpponentScoreUpdated(e,t){this.gameUIScript.OnOpponentScoreUpdated(e,t),this.gameControllerScript.OnOpponentScoreUpdated(e,t)}OnSelfPlayerDataUpdated(e){this.playerData=e,this.gameUIScript.OnSelfPlayerDataUpdated(e)}OnOpponentsReady(){this.startGame()}MP_Host_AssignNetworkedNodes(){return this.gameControllerScript.MP_Host_AssignNetworkedNodes()}MP_Client_AssignNetworkNodes(e){this.gameControllerScript.MP_Client_AssignNetworkNodes(e)}MP_OnInitializeNetworkedNode(e){return this.gameControllerScript.MP_OnInitializeNetworkedNode(e)}receive_command_KEY_NETWORK_NODE_REQUEST_DESTROY(e){this.gameControllerScript.receive_command_KEY_NETWORK_NODE_REQUEST_DESTROY(e)}receive_command_INITIALIZE_GAME_WORLD_ON_COOLDOWN(e){this.gameControllerScript.ReceiveCommandInitializeGameWorlOnCooldown(e)}onLoad(){super.onLoad(),cc.game.setFrameRate(60),e.instance=this}start(){this.gameControllerScript.setDefault(),r.default.getInstance().isSinglePlayer()?this.gameUIScript.showOffOpponentUI():this.gameControllerScript.showCooldownWaitingForOpponent(!0),r.default.getInstance().readyToStartGame()}startGame(){return s(this,void 0,void 0,function*(){this.gameControllerScript.showCooldownWaitingForOpponent(!1),yield Promise.all([this.gameControllerScript.showCooldownToStart(),this.InitializeGameWorld()]),this.gameControllerScript.startGame()})}InitializeGameWorld(){return s(this,void 0,void 0,function*(){const e=this.gameControllerScript.InitializeGameWorldOnCooldown();null!=e&&r.default.getInstance().send_command_INITIALIZE_GAME_WORLD_ON_COOLDOWN(e)})}triggerGameOver(){return s(this,void 0,void 0,function*(){yield this.gameUIScript.showTimerUp(),yield this.gameControllerScript.afterTimeUpEvent(),r.default.getInstance().triggerGameOver(),r.default.getInstance().isSinglePlayer()||this.gameUIScript.showWait4OpponentEndGame()})}updatePlayerScore(e){this.gameUIScript.updatePlayerScore(e),r.default.getInstance().sendCurrentScore(e)}PauseGame(){this.gameControllerScript.pauseGame()}ResumeGame(){this.gameControllerScript.resumeGame()}};return t.instance=null,o([d],t.prototype,"host",void 0),o([d(a.default)],t.prototype,"gameControllerScript",void 0),o([d(c.default)],t.prototype,"gameUIScript",void 0),t=e=o([l],t)})();n.default=h,cc._RF.pop()},{"../sdk/ISDKHandler":"ISDKHandler","../sdk/SdkFunctions":"SdkFunctions","./HCG_GameController":"HCG_GameController","./HCG_UIController":"HCG_UIController"}],HCG_ScoreComboSound:[function(e,t,n){"use strict";cc._RF.push(t,"a38ddsByg1KF6dih4lNx6hi","HCG_ScoreComboSound");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.SoundComboSetting=void 0;const{ccclass:s,property:i}=cc._decorator;let r=(()=>{let e=class{constructor(){this.cap=0,this.audioClip=null}};return o([i()],e.prototype,"cap",void 0),o([i(cc.AudioClip)],e.prototype,"audioClip",void 0),e=o([s("SoundComboSetting")],e)})();n.SoundComboSetting=r;let a=(()=>{var e;let t=e=class extends cc.Component{constructor(){super(...arguments),this.soundSetting=new Array}onLoad(){e.instance=this}getSoundByNumber(e){for(let t=0;t<this.soundSetting.length;t++){let n=this.soundSetting[t];if(!(e>n.cap))return n.audioClip;if(t==this.soundSetting.length-1)return n.audioClip}}PlaySoundCombo(e){cc.audioEngine.playEffect(this.getSoundByNumber(e),!1)}};return t.instance=null,o([i({type:r})],t.prototype,"soundSetting",void 0),t=e=o([s],t)})();n.default=a,cc._RF.pop()},{}],HCG_ScoreController:[function(e,t,n){"use strict";cc._RF.push(t,"77c26AoELtJcYn2bu5DS5tF","HCG_ScoreController");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.TimeComboSetting=void 0;const s=e("../utilities/Utils"),i=e("./HCG_GameManager"),r=e("./HCG_ScoreComboSound"),{ccclass:a,property:c}=cc._decorator;let l=(()=>{let e=class{constructor(){this.cap=0,this.duration=0}};return o([c()],e.prototype,"cap",void 0),o([c()],e.prototype,"duration",void 0),e=o([a("TimeComboSetting")],e)})();n.TimeComboSetting=l;let d=(()=>{var e;let t=e=class extends cc.Component{constructor(){super(...arguments),this.combo=0,this.score=0,this.scorePrefab=null,this.nodeCombo=null,this.comboText=null,this.comboValueLabel=null,this.scoreContainer=[],this.tempNum=0,this.addScoreDefault=1,this.addScoreByCombo=1,this.isChangeComboTextColor=!1,this.comboColors=[],this.isHaveCountDown=!1,this.comboTimerBar=null,this.isUsingCustomCountdown=!1,this.timeCombo=-1,this.timeComboSetting=new Array,this.timeLeft=-1,this.interval=.1,this.callback=function(){this.timeLeft-=this.interval;let e=this.timeLeft/this.timeCombo;this.adjustSlider(e),this.timeLeft<0&&(this.combo=0,this.nodeCombo.active=!1,this.unschedule(this.callback))},this.colorGetScore=cc.Color.GREEN,this.colorDecreaseScore=cc.Color.RED,this.isCustomTween=!1}onLoad(){e.instance=this}start(){this.nodeCombo.active=!1}caculatorScore(e){1==e?this.addScore():this.deductScore(),i.default.instance.updatePlayerScore(this.score),r.default.instance.PlaySoundCombo(this.combo)}addScore(){this.combo++;let e=this.addScoreDefault+(this.combo-1)*this.addScoreByCombo;if(this.score+=e,1==this.isHaveCountDown&&this.combo>1&&(this.comboTimerBar.node.active=!0,this.unschedule(this.callback),1==this.isUsingCustomCountdown?this.timeLeft=this.getComboDurationByComboNumber(this.combo):this.timeLeft=this.timeCombo,this.schedule(this.callback,this.interval)),this.comboValueLabel.string=this.combo.toString(),1==this.isChangeComboTextColor){let e=s.default.random(0,this.comboColors.length-1);this.comboValueLabel.node.color=this.comboColors[e],this.comboText.node.color=this.comboColors[e]}this.nodeCombo.active=this.combo>=2,this.combo>=2&&cc.tween(this.nodeCombo).to(0,{opacity:255}).to(.25,{scale:1.2}).to(.25,{scale:1}).start(),this.showScoreDisplay(e)}adjustSlider(e){this.comboTimerBar.progress=e}deductScore(){this.combo=0,this.score-=this.addScoreDefault,this.score<0&&(this.score=0),this.nodeCombo.active=!1;let e=-this.addScoreDefault;this.showScoreDisplay(e)}addManual(e,t=null){this.score+=e,i.default.instance.updatePlayerScore(this.score),this.showScoreDisplay(e,t)}updateScore(e){this.score=e,i.default.instance.updatePlayerScore(this.score)}customColor(e,t){null!=e&&(this.colorGetScore=e),null!=t&&(this.colorDecreaseScore=t)}customTween(e){this.isCustomTween=!0,this._customTween=e}customPlayEffectShowScore(e){this._customTween.clone(e).start()}showScoreDisplay(e,t=null){let n=cc.instantiate(this.scorePrefab);e<0?(n.color=this.colorDecreaseScore,n.getComponent(cc.Label).string=e.toString()):(n.color=this.colorGetScore,n.getComponent(cc.Label).string="+"+e.toString()),null!=t?n.setParent(t):n.setParent(this.scoreContainer[s.default.random(0,this.scoreContainer.length-1)]),this.tempNum++,1==this.isCustomTween?this.customPlayEffectShowScore(n):cc.tween(n).by(.5,{position:cc.v3(0,80)}).then(cc.fadeOut(.5)).removeSelf().start()}getComboDurationByComboNumber(e){for(let t=0;t<this.timeComboSetting.length;t++){let n=this.timeComboSetting[t];if(!(e>n.cap))return n.duration;if(t==this.timeComboSetting.length-1)return n.duration}}};return t.instance=null,o([c(cc.Prefab)],t.prototype,"scorePrefab",void 0),o([c(cc.Node)],t.prototype,"nodeCombo",void 0),o([c(cc.Label)],t.prototype,"comboText",void 0),o([c(cc.Label)],t.prototype,"comboValueLabel",void 0),o([c(cc.Node)],t.prototype,"scoreContainer",void 0),o([c],t.prototype,"addScoreDefault",void 0),o([c],t.prototype,"addScoreByCombo",void 0),o([c],t.prototype,"isChangeComboTextColor",void 0),o([c({type:cc.Color,visible:function(){return this.isChangeComboTextColor}})],t.prototype,"comboColors",void 0),o([c],t.prototype,"isHaveCountDown",void 0),o([c({type:cc.ProgressBar,visible:function(){return this.isHaveCountDown}})],t.prototype,"comboTimerBar",void 0),o([c],t.prototype,"isUsingCustomCountdown",void 0),o([c({visible:function(){return this.isHaveCountDown&&!this.isUsingCustomCountdown}})],t.prototype,"timeCombo",void 0),o([c({type:l,visible:function(){return this.isHaveCountDown&&this.isUsingCustomCountdown}})],t.prototype,"timeComboSetting",void 0),t=e=o([a],t)})();n.default=d,cc._RF.pop()},{"../utilities/Utils":"Utils","./HCG_GameManager":"HCG_GameManager","./HCG_ScoreComboSound":"HCG_ScoreComboSound"}],HCG_UIController:[function(e,t,n){"use strict";cc._RF.push(t,"8e4e987TgZFc5K9Bs3KgooC","HCG_UIController");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r},s=this&&this.__awaiter||function(e,t,n,o){function s(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function r(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?n(e.value):s(e.value).then(r,a)}c((o=o.apply(e,t||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../sdk/SdkFunctions"),r=e("../utilities/Utils"),a=e("./HCG_CountdownToStart"),{ccclass:c,property:l}=cc._decorator;let d=(()=>{var e;let t=e=class extends cc.Component{constructor(){super(...arguments),this.playerNameLabel=null,this.playerScoreLabel=null,this.playerAvatar=null,this.opponentNameLabel=null,this.opponentScoreLabel=null,this.opponentAvatar=null,this.timerLabel=null,this.nodeWaittingForOpponent=null,this.waitingCooldown=null,this.nodeTimeUp=null,this.label_timeUpUI=null,this.nodeWait4OpponentEndGame=null,this.nodeCountDownToStart=null}static getInstance(){return this._instance}onLoad(){e._instance=this,null!=this.waitingCooldown&&(this.waitingCooldown.string="")}OnOpponentUpdated(e){this.opponentNameLabel.string=e.firstName,e.avatar&&e.avatar.link&&r.default.loadImageFromURL(this.opponentAvatar,e.avatar.link,this.opponentAvatar.node.parent),this.opponentAvatar.node.on(cc.Node.EventType.TOUCH_START,function(){i.default.getInstance().showOpponentProfile(e.id)},this)}OnOpponentScoreUpdated(e,t){this.opponentScoreLabel.string=t.toString()}OnSelfPlayerDataUpdated(e){this.playerNameLabel.string=e.firstName,e.avatar&&e.avatar.link&&r.default.loadImageFromURL(this.playerAvatar,e.avatar.link,this.playerAvatar.node.parent)}updatePlayerScore(e){this.playerScoreLabel.string=e.toString()}showOffOpponentUI(){this.opponentNameLabel.node.active=!1,this.opponentScoreLabel.node.active=!1,this.opponentAvatar.node.active=!1}showCountdown2Start(){return s(this,void 0,void 0,function*(){null!=this.nodeCountDownToStart&&null!=this.nodeCountDownToStart&&(yield this.nodeCountDownToStart.playCountdown())})}showCooldownWaitingForOpponent(e){null!=this.nodeWaittingForOpponent&&(this.nodeWaittingForOpponent.active=e,null!=this.waitingCooldown&&(1==e?(this.waitingCooldown.node.active=!0,this.schedule(this.cooldownWaitingOpponent,1)):(this.waitingCooldown.node.active=!1,i.default.getInstance().RemainLoadingTime()>0&&this.unschedule(this.cooldownWaitingOpponent))))}cooldownWaitingOpponent(){this.waitingCooldown.string=i.default.getInstance().RemainLoadingTime()+"s",i.default.getInstance().RemainLoadingTime()<=0&&this.unschedule(this.cooldownWaitingOpponent)}showTimerUp(){return s(this,void 0,void 0,function*(){if(null!=this.nodeTimeUp&&null!=this.label_timeUpUI)return new Promise((e,t)=>{this.nodeTimeUp.active=!0,cc.tween(this.label_timeUpUI.node).to(.25,{scale:1.2,angle:10}).to(.5,{scale:.8,angle:-10}).to(.25,{scale:1,angle:0}).delay(.5).call(()=>{this.nodeTimeUp.active=!1,e("done")}).start()})})}showWait4OpponentEndGame(){null!=this.nodeWait4OpponentEndGame&&(this.nodeWait4OpponentEndGame.active=!0)}updateTimerLabel(e){this.timerLabel.string=r.default.secondToMinute(e)}};return t._instance=null,o([l(cc.Label)],t.prototype,"playerNameLabel",void 0),o([l(cc.Label)],t.prototype,"playerScoreLabel",void 0),o([l(cc.Sprite)],t.prototype,"playerAvatar",void 0),o([l(cc.Label)],t.prototype,"opponentNameLabel",void 0),o([l(cc.Label)],t.prototype,"opponentScoreLabel",void 0),o([l(cc.Sprite)],t.prototype,"opponentAvatar",void 0),o([l(cc.Label)],t.prototype,"timerLabel",void 0),o([l(cc.Node)],t.prototype,"nodeWaittingForOpponent",void 0),o([l(cc.Label)],t.prototype,"waitingCooldown",void 0),o([l(cc.Node)],t.prototype,"nodeTimeUp",void 0),o([l(cc.Label)],t.prototype,"label_timeUpUI",void 0),o([l(cc.Node)],t.prototype,"nodeWait4OpponentEndGame",void 0),o([l(a.default)],t.prototype,"nodeCountDownToStart",void 0),t=e=o([c],t)})();n.default=d,cc._RF.pop()},{"../sdk/SdkFunctions":"SdkFunctions","../utilities/Utils":"Utils","./HCG_CountdownToStart":"HCG_CountdownToStart"}],HelpController:[function(e,t,n){"use strict";cc._RF.push(t,"54123GjlthPW7lMvzA9j7Vm","HelpController");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const s=e("../Sound/SoundManager"),i=e("../UI/HCG_GameManager"),{ccclass:r,property:a}=cc._decorator;let c=(()=>{var e;let t=e=class extends cc.Component{constructor(){super(...arguments),this.helpPanel=null,this.openButton=null,this.closeButton1=null,this.closeButton2=null,this.pauseGameOnSingle=!0,this._isOpen=!1}static getInstance(){return this._instance}isOpen(){return this._isOpen}onLoad(){e._instance=this,this._isOpen=!1,this.helpPanel.active=!1;var t=new cc.Component.EventHandler;t.target=this.node,t.component="HelpController",t.handler="onClickClose",this.closeButton1.clickEvents.push(t),this.closeButton2.clickEvents.push(t);var n=new cc.Component.EventHandler;n.target=this.node,n.component="HelpController",n.handler="onClickOpen",this.openButton.clickEvents.push(n)}onDestroy(){this.closeButton1.clickEvents.slice(0,this.closeButton1.clickEvents.length),this.closeButton2.clickEvents.slice(0,this.closeButton2.clickEvents.length),this.openButton.clickEvents.slice(0,this.openButton.clickEvents.length)}onClickOpen(){this._isOpen=!0,this.helpPanel.active=!0,this.helpPanel.opacity=0,this.helpPanel.scale=0,s.default.getInstance().PlayButtonSFX(),cc.tween(this.helpPanel).parallel(cc.tween(this.helpPanel).to(.1,{opacity:255}),cc.tween(this.helpPanel).to(.1,{scale:1},{easing:"backOut"})).delay(.2).call(()=>{this.pauseGameOnSingle&&1==gpSDK.isSinglePlayer()&&i.default.instance.PauseGame(),null!=this.onHelpOpenOrClose&&this.onHelpOpenOrClose(!0)}).start()}onClickClose(){this._isOpen=!1,this.helpPanel.stopAllActions(),this.helpPanel.active=!1,s.default.getInstance().PlayButtonSFX(),this.pauseGameOnSingle&&1==gpSDK.isSinglePlayer()&&i.default.instance.ResumeGame(),null!=this.onHelpOpenOrClose&&this.onHelpOpenOrClose(!1)}};return t._instance=null,o([a(cc.Node)],t.prototype,"helpPanel",void 0),o([a(cc.Button)],t.prototype,"openButton",void 0),o([a(cc.Button)],t.prototype,"closeButton1",void 0),o([a(cc.Button)],t.prototype,"closeButton2",void 0),o([a],t.prototype,"pauseGameOnSingle",void 0),t=e=o([r],t)})();n.default=c,cc._RF.pop()},{"../Sound/SoundManager":"SoundManager","../UI/HCG_GameManager":"HCG_GameManager"}],HommingMissbleDirections:[function(e,t,n){"use strict";cc._RF.push(t,"05bc2HnimJHZbKbaazLbOmC","HommingMissbleDirections");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const s=e("./Globe"),{ccclass:i,property:r}=cc._decorator;let a=(()=>{var e;let t=e=class extends cc.Component{constructor(){super(...arguments),this.directions=new Array,this._directions=new Array}static getInstance(){return this._instance}onLoad(){e._instance=this;for(var t=0;t<this.directions.length;t++){const e=new Array;for(var n=0;n<10;n++){const o=this.directions[t].getChildByName("Node_"+n);if(null==o)break;e.push(o)}this._directions.push(e)}}getPositions(e){const t=new Array,n=s.default.getInstance().node.parent.convertToWorldSpaceAR(s.default.getInstance().node.position);if(e>=0&&e<this._directions.length)for(var o=0;o<this._directions[e].length;o++){const n=this._directions[e][o],s=n.parent.convertToWorldSpaceAR(n.position);t.push(s)}return t.push(n),t}};return t._instance=null,o([r([cc.Node])],t.prototype,"directions",void 0),t=e=o([i],t)})();n.default=a,cc._RF.pop()},{"./Globe":"Globe"}],ISDKHandler:[function(e,t,n){"use strict";cc._RF.push(t,"4d5b3Lqox9HKa8Df0zZ+7YH","ISDKHandler");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const s=e("./SDKEngine"),i=e("./SdkFunctions"),{ccclass:r,property:a}=cc._decorator;let c=(()=>{let e=class extends cc.Component{constructor(){super(...arguments),this.engine=null}onLoad(){null!=this.engine&&s.default.setInstance(this.engine),console.log("@@=> [ISDKHandler] register sdk!"),i.default.getInstance().setSDKHandler(this)}OnSelfPlayerDataUpdated(e){console.log("OnSelfPlayerDataUpdated(playerData) not overridden")}OnOpponentUpdated(e){console.log("OnOpponentUpdated(opponent) not overridden")}OnOpponentScoreUpdated(e,t){console.log("OnOpponentScoreUpdated(opponentID, opponentScore:number) not overridden")}OnFinalScoreUpdated(){console.log("OnSelfPlayerDataUpdated() not overridden")}OnOpponentsReady(){console.log("OnOpponentsReady() not overridden")}MP_Host_AssignNetworkedNodes(){return console.log("MP_Host_AssignNetworkedNode() not overridden"),[]}MP_Client_AssignNetworkNodes(e){console.log("MP_Client_AssignNetworkNodes() not overridden")}MP_OnInitializeNetworkedNode(e){return console.log("MP_OnInitializeNetworkedNode(prefabName:string) not overridden"),null}receive_command_KEY_NETWORK_NODE_REQUEST_DESTROY(e){console.log("receive_command_KEY_NETWORK_NODE_REQUEST_DESTROY(prefabName:string) not overridden")}receive_command_INITIALIZE_GAME_WORLD_ON_COOLDOWN(e){}};return o([a(s.default)],e.prototype,"engine",void 0),e=o([r],e)})();n.default=c,cc._RF.pop()},{"./SDKEngine":"SDKEngine","./SdkFunctions":"SdkFunctions"}],ImplementEffects:[function(e,t,n){"use strict";cc._RF.push(t,"996aa0DRGpIBJ7rR6YmTHxd","ImplementEffects"),Object.defineProperty(n,"__esModule",{value:!0}),n.Instant_SPAWN_ASTEROID=n.Instant_ORBIT_BOOM=n.Instant_HOMING_MISSILE=n.BUFF_INC_MONSTER_SPEED_X2=n.BUFF_DECS_MONSTER_SIZE_X2=n.BUFF_FRENZY_MODE=void 0;const o=e("../../hcg-core/BuffSystem/BuffEffect"),s=e("../../hcg-core/BuffSystem/InstantEffect"),i=e("../GameController"),r=e("../OrbitManager/AsteroidManager"),a=e("../OrbitManager/MinionRoamingManager"),c=e("../Ship"),l=e("./BuffManager");n.BUFF_FRENZY_MODE=class extends o.BuffEffect{constructor(){super(...arguments),this.EffectId=l.ItemType.FRENZY_MODE,this.IsStack=!1}doApply(){i.default.getInstance().isOnFenzyMode=!0}doRemove(){i.default.getInstance().isOnFenzyMode=!1}};n.BUFF_DECS_MONSTER_SIZE_X2=class extends o.BuffEffect{constructor(){super(...arguments),this.EffectId=l.ItemType.DECS_MONSTER_SIZE_X2,this.IsStack=!1,this.minions=null}doApply(){this.minions=a.default.getInstance().getAgents(),this.minions.forEach(e=>{null!=e&&null!=e.node&&(e.node.scaleX/=2,e.node.scaleY=Math.abs(e.node.scaleY/2))})}doRemove(){this.minions.forEach(e=>{null!=e&&null!=e.node&&(e.node.scaleX*=2,e.node.scaleY=Math.abs(2*e.node.scaleY))})}};n.BUFF_INC_MONSTER_SPEED_X2=class extends o.BuffEffect{constructor(){super(...arguments),this.EffectId=l.ItemType.INC_MONSTER_SPEED_X2,this.IsStack=!1,this.minions=null}doApply(){this.minions=a.default.getInstance().getAgents(),this.minions.forEach(e=>{null!=e&&null!=e.node&&(e.AngleSpeed*=2)})}doRemove(){this.minions.forEach(e=>{null!=e&&null!=e.node&&(e.AngleSpeed*=.5)})}};n.Instant_HOMING_MISSILE=class extends s.InstantEffect{constructor(){super(...arguments),this.EffectId=l.ItemType.HOMING_MISSILE,this.maxMissile=6}doApply(){this.shoot(0)}shoot(e){e>=0&&e<6&&(c.default.getInstance().doShoot(!0,e),++e>=0&&e<6&&cc.tween(c.default.getInstance().node).delay(.1).call(()=>{this.shoot(e)}).start())}};n.Instant_ORBIT_BOOM=class extends s.InstantEffect{constructor(){super(...arguments),this.EffectId=l.ItemType.ORBIT_BOOM}doApply(){var e=r.default.getInstance().getAgents();console.log("@@=> Instant_ORBIT_BOOM: "+e.length);for(var t=e.length-1;t>=0;t--)r.default.getInstance().onHitBullet(e[t])}};n.Instant_SPAWN_ASTEROID=class extends s.InstantEffect{constructor(e,t,n){super(e),this.EffectId=l.ItemType.SPAWN_ASTEROID,this._angle=0,this._angle=t,this._orbitRadius=n}doApply(){r.default.getInstance().spawnAtPosition(Math.randomInt(3,11),this._angle,20,this._orbitRadius)}},cc._RF.pop()},{"../../hcg-core/BuffSystem/BuffEffect":"BuffEffect","../../hcg-core/BuffSystem/InstantEffect":"InstantEffect","../GameController":"GameController","../OrbitManager/AsteroidManager":"AsteroidManager","../OrbitManager/MinionRoamingManager":"MinionRoamingManager","../Ship":"Ship","./BuffManager":"BuffManager"}],InstantEffect:[function(e,t,n){"use strict";cc._RF.push(t,"6963bK9TbRERJsrnZY+6aWW","InstantEffect"),Object.defineProperty(n,"__esModule",{value:!0}),n.InstantEffect=void 0;const o=e("./BuffManagerBase");n.InstantEffect=class{constructor(e){this.Index=o.default.generateId(),this.Owner=e}apply(){return this.doApply(),!0}},cc._RF.pop()},{"./BuffManagerBase":"BuffManagerBase"}],ItemAlertContainer:[function(e,t,n){"use strict";cc._RF.push(t,"24ecctJENZMHrvPxQeIyATz","ItemAlertContainer");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const s=e("../hcg-core/Sound/SoundManager"),i=e("./BuffSystem/BuffManager"),r=e("./GameController"),{ccclass:a,property:c}=cc._decorator;let l=(()=>{let e=class extends cc.Component{constructor(){super(...arguments),this.flyToNode=null,this.itemName=null,this.itemIcon=null,this.animation=null}onLoad(){this.itemName.string="",this.itemIcon.spriteFrame=null,this._defaultItemIconPos=new cc.Vec3(this.itemIcon.node.position.x,this.itemIcon.node.position.y,this.itemIcon.node.position.z)}start(){}showItemAlertEffect(e,t){s.default.getInstance().playSound(r.default.getInstance().chickenSFX,!1),this.animation.play(),cc.tween(this.node).delay(1.3).call(()=>{this.showEffectText(e),this.showIconEffect(e)}).delay(.5).call(()=>{t()}).start()}showEffectText(e){this.itemName.string=i.default.getInstance().getItemTypeName(e);const t=this.itemName.node;t.opacity=0,t.scale=1,cc.tween(t).parallel(cc.tween(t).to(.5,{opacity:255}),cc.tween(t).to(.2,{scale:1})).delay(.5).call(()=>{this.itemName.string=""}).start()}showIconEffect(e){var t=i.default.getInstance().getItemSprite(e);this.itemIcon.spriteFrame=t;const n=this.itemIcon.node;switch(n.position=this._defaultItemIconPos,n.opacity=1,n.scale=1,e){case i.ItemType.FRENZY_MODE:case i.ItemType.INC_MONSTER_SPEED_X2:case i.ItemType.DECS_MONSTER_SIZE_X2:{const e=this.node.convertToNodeSpaceAR(this.flyToNode.parent.convertToWorldSpaceAR(this.flyToNode.position));cc.tween(n).parallel(cc.tween(n).to(.5,{opacity:255}),cc.tween(n).to(.2,{scale:1})).delay(.4).parallel(cc.tween(n).to(.5,{position:e}),cc.tween(n).to(.7,{opacity:0}),cc.tween(n).to(.5,{scale:0})).call(()=>{this.itemIcon.spriteFrame=null}).start();break}case i.ItemType.ORBIT_BOOM:case i.ItemType.SPAWN_ASTEROID:case i.ItemType.HOMING_MISSILE:cc.tween(n).parallel(cc.tween(n).to(.5,{opacity:255}),cc.tween(n).to(.2,{scale:1})).delay(.4).parallel(cc.tween(n).to(.7,{opacity:0}),cc.tween(n).to(.5,{scale:1})).call(()=>{this.itemIcon.spriteFrame=null}).start()}}};return o([c(cc.Node)],e.prototype,"flyToNode",void 0),o([c(cc.Label)],e.prototype,"itemName",void 0),o([c(cc.Sprite)],e.prototype,"itemIcon",void 0),o([c(cc.Animation)],e.prototype,"animation",void 0),e=o([a],e)})();n.default=l,cc._RF.pop()},{"../hcg-core/Sound/SoundManager":"SoundManager","./BuffSystem/BuffManager":"BuffManager","./GameController":"GameController"}],LBPositionConverter:[function(e,t,n){"use strict";cc._RF.push(t,"5f932n618xN44hAmTmw9N3G","LBPositionConverter"),Object.defineProperty(n,"__esModule",{value:!0});n.default=class{constructor(e,t){this._cSize=new cc.Vec2(e.x,e.y),this._cAnchor=new cc.Vec2(t.x,t.y)}toLBPos(e){return new cc.Vec2(e.x+this._cAnchor.x*this._cSize.x,e.y+this._cAnchor.y*this._cSize.y)}toAnchorPos(e){return new cc.Vec2(e.x-this._cAnchor.x*this._cSize.x,e.y-this._cAnchor.y*this._cSize.y)}},cc._RF.pop()},{}],MapExtensions:[function(e,t,n){"use strict";cc._RF.push(t,"8a2c0teoF5EUKf6G5JgpaRn","MapExtensions"),Map.prototype.getRandomKey=function(){let e=Math.floor(Math.random()*this.size),t=0;for(let n of this.keys())if(t++===e)return n},Map.prototype.getRandomValue=function(){let e=Math.floor(Math.random()*this.size),t=0;for(let n of this.values())if(t++===e)return console.log("random"),n},Map.prototype.convertValuesToSet=function(){let e=new Set;return this.forEach(t=>{e.add(t)}),e},Map.prototype.getRandomKey_Old=function(){return Array.from(this.keys()).getRandom()},Map.prototype.getRandomValue_Old=function(){return Array.from(this.values()).getRandom()},cc._RF.pop()},{}],MathExtensions:[function(e,t,n){"use strict";cc._RF.push(t,"4d0f50aNr1I/Kc95SdwTi4L","MathExtensions"),Math.randomArb=function(e,t){return Math.random()*(t-e)+e},Math.randomInt=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e},Math.randomIntIncl=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},Math.flipCoin=function(){return Math.random()>.5},Math.clamp=function(e,t,n){return e<=t?t:e>=n?n:e},cc._RF.pop()},{}],MinionRoamingManager:[function(e,t,n){"use strict";cc._RF.push(t,"6f3c5UFGMlF8J866i7ewD3s","MinionRoamingManager");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const s=e("../GameController"),i=e("../OrbitRoamingManager"),r=e("./Minion"),{ccclass:a,property:c}=cc._decorator;let l=(()=>{var e;let t=e=class extends i.default{constructor(){super(...arguments),this.maxMinionNumber=10,this.baseSpeed=55}static getInstance(){return this._instance}getTargetComponent(e){return e.getComponent(r.default)}onLoad(){e._instance=this,super.onLoad()}initialize(){super.initialize(),this.spawn(this.maxMinionNumber)}onBeforeSpawnAgent(e,t,n){super.onBeforeSpawnAgent(e,t,n);const o=s.default.getInstance();o.recorder.recordSpawnMonster(o.getElapseTime(),e,t,n)}onBeforeDestroyAgent(e){const t=s.default.getInstance();t.recorder.recordDestroyMonster(t.getElapseTime(),e)}onHitBullet(e){e.node.angle,this.getOrbitRadius();const t=super.onHitBullet(e);if(1==t){const t=s.default.getInstance();t.scoreController.addScore();const n=e.getAngleCalculator(),o=t.getElapseTime(),i=n.angleSpeed,r=Math.round(1e3*(n.getAnglePosition(o)+Number.EPSILON))/1e3,a={};t.recorder.recordHitMonster(o,e.Id,i,r,0,a),this.spawn(1)}return t}getDefaultSpeed(e){return this.baseSpeed*e.getComponent(r.default).speedMultiplier}changeDirection(){const e=this.getAgents();for(var t=0;t<e.length;t++)e[t].setDirection(-e[t].getDirection())}};return t._instance=null,o([c],t.prototype,"maxMinionNumber",void 0),o([c],t.prototype,"baseSpeed",void 0),t=e=o([a],t)})();n.default=l,cc._RF.pop()},{"../GameController":"GameController","../OrbitRoamingManager":"OrbitRoamingManager","./Minion":"Minion"}],Minion:[function(e,t,n){"use strict";cc._RF.push(t,"cd5c7zCaOhG6LvugVRcaHMz","Minion");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const s=e("../GameController"),i=e("../Globe"),r=e("../OrbitRoaming"),{ccclass:a,property:c}=cc._decorator;let l=(()=>{let e=class extends r.default{constructor(){super(...arguments),this.speedMultiplier=1}enableCollide(e){this.node.getComponent(cc.CircleCollider).enabled=e}initialize(e,t,n){super.initialize(e,t,n,!1,0,0,!0,t,1),this.setDirection(i.default.getInstance().currentGlobeDirection)}onDirectionChange(){super.onDirectionChange(),this.node.scaleX=this.getDirection()*Math.abs(this.node.scaleX),this.node.scaleY=Math.abs(this.node.scaleY)}onMovementStarted(e,t,n){super.onMovementChanged(e,t,n);const o=s.default.getInstance();o.recorder.recordStartMonster(o.getElapseTime(),this.Id,t,n)}onMovementChanged(e,t,n){super.onMovementStarted(e,t,n);const o=s.default.getInstance();o.recorder.recordUpdateMonster(o.getElapseTime(),this.Id,t,n)}};return o([c],e.prototype,"speedMultiplier",void 0),e=o([a],e)})();n.default=l,cc._RF.pop()},{"../GameController":"GameController","../Globe":"Globe","../OrbitRoaming":"OrbitRoaming"}],NetworkedNode:[function(e,t,n){"use strict";cc._RF.push(t,"27b1f+hPgJEor109iSkusUM","NetworkedNode"),Object.defineProperty(n,"__esModule",{value:!0});const o=e("../utilities/Utils"),s=e("./SdkFunctions");n.default=class extends cc.Component{constructor(){super(...arguments),this._minUpdateInterval=-1,this._timeSinceLastFrame=this._minUpdateInterval,this.syncedVariables=["networkedNodeID","ownerID"],this.previousWatchedVariableValues=new Map,this._lastUpdatedTimestamp=0,this._changeDetected=!1}getPrefabNameKey(){return this.node.name}generateNetworkID(){this.networkedNodeID||(this.setNetworkID(o.default.generateUUID()),this.assignOwnerID(s.default.getInstance().myPlayerId()))}assignOwnerID(e){this.ownerID=e}setNetworkID(e){null!=e?(this.networkedNodeID=e,s.default.getInstance().addNetworkNode(this)):(s.default.getInstance().removeNetworkNode(this),this.networkedNodeID=null)}addSyncedVariables(...e){for(let t of e)this.syncedVariables.push(t)}convertToData(){let e={};for(let t of this.syncedVariables)e[t]=this.getNodeValue(t),this.previousWatchedVariableValues.has(t)&&this.previousWatchedVariableValues.get(t)==e[t]||(this.previousWatchedVariableValues.set(t,e[t]),this._changeDetected=!0);return e}updateData(){let e=this.convertToData();this._changeDetected&&(this._changeDetected=!1,s.default.getInstance().send_command_NETWORK_NODE_DATA_CHANGED(this,e))}reassignNodeOwner(e){if(this.ownerID!=e&&s.default.getInstance().myPlayerId()==this.ownerID||s.default.getInstance().isHost){this.ownerID=e;let t=this.convertToData();s.default.getInstance().send_command_NETWORK_NODE_REASSIGN_OWNER(this,t)}}updateFromData(e,t){this._lastUpdatedTimestamp<t?(this._lastUpdatedTimestamp=t,this.onDataReceivedImpl(e)):console.log("@@=> update rejected by time, "+t)}getNodeValue(e,t=this){return e.includes(".")?this.getNodeValue(e.substr(e.indexOf(".")+1),t[e.substr(0,e.indexOf("."))]):t[e]}isSelfOwnNode(){return!!this.ownerID&&this.ownerID==s.default.getInstance().myPlayerId()}update(e){this._minUpdateInterval>=0&&this.isSelfOwnNode()&&(this._timeSinceLastFrame-=e,this._timeSinceLastFrame<0&&(this._timeSinceLastFrame=this._minUpdateInterval,this.updateData()))}destroyNode(){1==this.hasAuthority()&&(s.default.getInstance().send_command_NETWORK_NODE_DESTROY(this),this.setNetworkID(null),this.assignOwnerID(null),this.node.destroy())}destroyOrSendDestroyNodeRequest(){1==this.hasAuthority()?this.destroyNode():s.default.getInstance().send_command_KEY_NETWORK_NODE_REQUEST_DESTROY(this)}hasAuthority(){return 1==s.default.getInstance().isHost()||this.ownerID==s.default.getInstance().myPlayerId()}},cc._RF.pop()},{"../utilities/Utils":"Utils","./SdkFunctions":"SdkFunctions"}],OrbitRoamingManager:[function(e,t,n){"use strict";cc._RF.push(t,"0d97eTmnc5KqYNN5drzLqH1","OrbitRoamingManager");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const s=e("../hcg-core/Sound/SoundManager"),i=e("../hcg-core/utilities/Utils"),r=e("./GameController"),a=e("./Globe"),{ccclass:c,property:l}=cc._decorator;let d=(()=>{let e=class extends cc.Component{constructor(){super(...arguments),this.orbitHeight=100,this.minSpeed=10,this.maxSpeed=30,this.minSizePct=50,this.maxSizePct=120,this.deltaHeight=25,this.autoSpawnByInterval=!0,this.firstSpawnCooldown=10,this.spawnIntervalTime=5,this.templates=new Array,this.explodeFX=null,this.flyIn=!1,this.flyInFromSpaceHight=1e3,this.flyInTime=2,this._agents=new Array,this._orbitTo=null,this.destroyingAgents=new Map,this._isInitialized=!1}getOrbitRadius(){return a.default.getInstance().globeRadius+this.orbitHeight}getAgents(){var e=new Array;return this._agents.forEach(t=>{null!=t&&null!=t.node&&0==this.destroyingAgents.has(t)&&e.push(t)}),e}collectAndStop(){this.node.stopAllActions();for(var e=this._agents.length-1;e>=0;e--){const t=this._agents[e];null!=t&&null!=t.node&&0==this.destroyingAgents.has(t)&&(this._agents[e].node.destroy(),this._agents.splice(e,0))}}onLoad(){}start(){this._orbitTo=r.default.getInstance().globeController.node}update(e){0==this._isInitialized&&1==r.default.getInstance().gameStarted&&this.initialize()}initialize(){1!=this._isInitialized&&(this._isInitialized=!0,1==this.autoSpawnByInterval&&cc.tween(this.node).delay(this.firstSpawnCooldown).call(()=>{this.spawnInterval(this.spawnIntervalTime)}).start())}spawnInterval(e){0==r.default.getInstance().isGameOver&&(this.spawn(1),cc.tween(this.node).delay(e).call(()=>this.spawnInterval(e)).start())}spawn(e=1){if(!(e<=0))for(var t=0;t<e;t++)this._spawn(Math.randomInt(0,360),!1,this.getOrbitRadius())}spawnAtPosition(e,t,n,o){for(var s=0;s<e;s++){const e=Math.randomInt(0,2*n)-n;this._spawn(t+e,!0,o)}}onHitBullet(e){if(null==e||null==e.node)return!1;var t=this._agents.indexOf(e);if(!(t>=0))return!1;if(this._agents.splice(t,1),this.destroyingAgents.has(e))return!1;this.destroyingAgents.set(e,!0),s.default.getInstance().playSound(this.explodeFX,!1),e.enableCollide(!1),e.node.getComponent(cc.Sprite).enabled=!1;const n=e.node.getComponentInChildren(cc.ParticleSystem);null!=n&&n.resetSystem();const o=e.node.getComponentInChildren(cc.Animation);return null!=o&&o.play("animation"),cc.tween(e.node).delay(3).call(()=>{this.onBeforeDestroyAgent(e.Id),this.destroyingAgents.delete(e),e.node.destroy()}).start(),!0}_spawn(e,t,n){const o=cc.instantiate(this.templates[Math.randomInt(0,this.templates.length)]);o.setParent(this._orbitTo);const s=this.getTargetComponent(o);s.node.angle=e,s.node.scale=Math.randomInt(this.minSizePct,this.maxSizePct)/100;var r=n+Math.randomInt(0,2*this.deltaHeight)-this.deltaHeight,a=this.getOrbitRadius()+Math.randomInt(0,2*this.deltaHeight)-this.deltaHeight;const c=this.getDefaultSpeed(o),l=i.default.getUniqueId();return this.onBeforeSpawnAgent(l,c,e),s.initialize(l,a,c,this.flyIn,this.flyInTime,this.flyInFromSpaceHight,t,r),this._agents.push(s),s}getDefaultSpeed(e){return Math.randomInt(this.minSpeed,this.maxSpeed+1)}onBeforeSpawnAgent(e,t,n){}onBeforeDestroyAgent(e){}};return o([l],e.prototype,"orbitHeight",void 0),o([l],e.prototype,"minSpeed",void 0),o([l],e.prototype,"maxSpeed",void 0),o([l],e.prototype,"minSizePct",void 0),o([l],e.prototype,"maxSizePct",void 0),o([l],e.prototype,"deltaHeight",void 0),o([l],e.prototype,"autoSpawnByInterval",void 0),o([l],e.prototype,"firstSpawnCooldown",void 0),o([l],e.prototype,"spawnIntervalTime",void 0),o([l([cc.Prefab])],e.prototype,"templates",void 0),o([l(cc.AudioClip)],e.prototype,"explodeFX",void 0),o([l],e.prototype,"flyIn",void 0),o([l],e.prototype,"flyInFromSpaceHight",void 0),o([l],e.prototype,"flyInTime",void 0),e=o([c],e)})();n.default=d,cc._RF.pop()},{"../hcg-core/Sound/SoundManager":"SoundManager","../hcg-core/utilities/Utils":"Utils","./GameController":"GameController","./Globe":"Globe"}],OrbitRoaming:[function(e,t,n){"use strict";cc._RF.push(t,"b09ae36RapD8IMAs3M6RUFL","OrbitRoaming");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const s=e("../hcg-core/utilities/Utils"),i=e("./GameController"),{ccclass:r,property:a}=cc._decorator;let c=(()=>{let e=class extends cc.Component{constructor(){super(...arguments),this._id=-1,this._angleSpeed=-1,this._height=-1,this._firstSet=!0,this._direction=1,this._angleCalculator=null,this._h=1,this._flyIn=!1,this._flyInTime=1,this._flyInFromSpaceHight=2e3,this._timeToInstantSpawn=0,this._canMove=!0,this.lastTick=-1}get Id(){return this._id}get AngleSpeed(){return this._angleSpeed}set AngleSpeed(e){this._angleSpeed=e,this.movementChanged()}get Height(){return this._height}getAngleCalculator(){return this._angleCalculator}getDirection(){return this._direction}setDirection(e){const t=e>=0?1:-1;1!=this._firstSet&&this._direction==t||(this._direction=t,this.onDirectionChange(),this._firstSet=!1,this.movementChanged())}getFlyInAndOutTime(){return this._flyInTime}movementChanged(){if(null!=this._angleCalculator){const e=i.default.getInstance().getElapseTime(),t=this._angleSpeed*this.getDirection(),n=this._angleCalculator.getAnglePosition(e);this._angleCalculator.updateChanges(e,t,n),this.onMovementChanged(e,t,n)}}movementStart(){if(null!=this._angleCalculator&&0==this._angleCalculator.isStarted){const e=i.default.getInstance().getElapseTime(),t=this._angleSpeed*this.getDirection(),n=this.node.angle;this._angleCalculator.start(e,t,n),this.onMovementStarted(e,t,n)}}initialize(e,t,n,o,s,i,r=!1,a,c){this._id=e,this._angleSpeed=n,this._height=t,this._flyIn=o,this._flyInTime=s,this._flyInFromSpaceHight=i,this._timeToInstantSpawn=c,this._angleCalculator=validatorFactory.createAnglePositionCalculator(this.node.angle),1==r?(this._h=a,this._from=a,this._to=this._height,this._timeToInstantSpawn>0?(this.enableCollide(!1),this._canMove=!1,cc.tween(this.node).then(cc.fadeIn(this._timeToInstantSpawn)).call(()=>{this.enableCollide(!0),this._canMove=!0,this.movementStart()}).start()):this.movementStart()):(this.movementStart(),1==this._flyIn?this.setFlyInToOrbit():this.setToOrbit())}onHitBullet(){}onLoad(){}update(e){if(1!=i.default.getInstance().isGameOver){var t=e;-1!=this.lastTick&&(t=.001*(i.default.getInstance().getElapseTime()-this.lastTick)),this.lastTick=i.default.getInstance().getElapseTime(),this.node.angle=this._angleCalculator.getAnglePosition(i.default.getInstance().getElapseTime()),this.node.setPosition(s.default.calculatePosFromAngleRadius(this._h,-this.node.angle)),1==this._canMove&&(this._from<this._to?this._h<this._to&&(this._h+=t*(this._flyInFromSpaceHight/this._flyInTime)):this._from>this._to&&this._h>this._to&&(this._h-=t*(this._flyInFromSpaceHight/this._flyInTime)))}}setFlyInToOrbit(){this._h=this._flyInFromSpaceHight,this._from=this._flyInFromSpaceHight,this._to=this._height}setFlyOutToSpace(){this._h=this._height,this._from=this._height,this._to=this._flyInFromSpaceHight}setToOrbit(){this._h=this._height,this._from=this._height,this._to=this._height}onDirectionChange(){}onMovementChanged(e,t,n){}onMovementStarted(e,t,n){}};return e=o([r],e)})();n.default=c,cc._RF.pop()},{"../hcg-core/utilities/Utils":"Utils","./GameController":"GameController"}],PesudoRandom:[function(e,t,n){"use strict";cc._RF.push(t,"d6f8d1UUrlLgLBY3T5r8D4I","PesudoRandom"),Object.defineProperty(n,"__esModule",{value:!0});n.default=class{constructor(e){this._seed=Math.floor(e),this._seed<=0&&(this._seed+=2147483646)}get Seed(){return this._seed}next(){return this._seed=16807*this._seed%2147483647}nextFloat(){return(this.next()-1)/2147483646}rangeInt(e,t){return Math.floor(this.nextFloat()*Math.floor(t-e))+e}rangeFloat(e,t){return this.nextFloat()*(t-e)+e}getRandomEnum(e){const t=Object.keys(e).length;return this.rangeInt(0,t)}},cc._RF.pop()},{}],PlayerEmoticons:[function(e,t,n){"use strict";cc._RF.push(t,"38d6dXnICxGaI+iUhv7066t","PlayerEmoticons");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const{ccclass:s,property:i}=cc._decorator;let r=(()=>{let e=class extends cc.Component{constructor(){super(...arguments),this.emoticonBox=null,this.emoticons=new Array,this.timeToKeep=2,this.tweenBox=null,this.tweenEmoji=null}start(){this.emoticons.forEach(e=>{e.opacity=0,e.active=!0,e.getComponent(cc.Widget).enabled=!1,e.setPosition(cc.v2(0,5))})}showEmoticon(e){if(null!=e&&!(e<0||e>=this.emoticons.length)){null!=this.tweenBox&&this.tweenBox.stop(),null!=this.tweenEmoji&&this.tweenEmoji.stop();for(var t=0;t<this.emoticons.length;t++){const n=this.emoticons[t];t!=e&&0!=n.opacity&&(n.opacity=0),t==e&&(n.scale=0,n.opacity=0,this.emoticonBox.active=!0,this.emoticonBox.opacity=0,this.emoticonBox.scale=0,this.tweenBox=cc.tween(this.emoticonBox).parallel(cc.tween(this.emoticonBox).to(.3,{opacity:255}),cc.tween(this.emoticonBox).to(.3,{scale:1},{easing:"backOut"})).delay(.8+this.timeToKeep).call(()=>{cc.tween(this.emoticonBox).to(.3,{opacity:0}).delay(.3).call(()=>this.emoticonBox.active=!1).start()}).start(),this.tweenEmoji=cc.tween(n).delay(.5).parallel(cc.tween(n).to(.3,{opacity:255}),cc.tween(n).to(.3,{scale:1},{easing:"backOut"})).delay(this.timeToKeep).call(()=>{cc.tween(n).to(.3,{opacity:0}).delay(.3).call(()=>n.opacity=0).start()}).start())}}}};return o([i(cc.Node)],e.prototype,"emoticonBox",void 0),o([i([cc.Node])],e.prototype,"emoticons",void 0),o([i],e.prototype,"timeToKeep",void 0),e=o([s],e)})();n.default=r,cc._RF.pop()},{}],PongMessage:[function(e,t,n){"use strict";cc._RF.push(t,"61b3dSPeYlPB6w4bU15ZJcJ","PongMessage"),Object.defineProperty(n,"__esModule",{value:!0});n.default=class{constructor(e,t,n,o,s,i){this.retryOnMiliseconds=-1,this.KEY_REQUEST=-1,this.KEY_ACCEPTED=-1,this.target_process_request=null,this.actor_done=null,this._acceptedPeers=new Array,this._accepted=!1,this._done=!1,this._hasBeenSent=!1,this._sdkFunction=null,this._sdkFunction=e,this.retryOnMiliseconds=t,this.KEY_REQUEST=n,this.KEY_ACCEPTED=o,this.target_process_request=s,this.actor_done=i,this._sdkFunction.registerEvent(this.KEY_REQUEST,e=>this.receive_command_KEY_REQUEST(e)),this._sdkFunction.registerEvent(this.KEY_ACCEPTED,e=>this.receive_command_KEY_ACCEPTED(e))}sendPong(e){if(1==this._hasBeenSent)return;this._hasBeenSent=!0;const t=Object.assign({},{pong:e});this.send(t)}reset(){this._hasBeenSent=!1,this._accepted=!1,this._done=!1,this._acceptedPeers.splice(0,this._acceptedPeers.length)}send(e){this._sdkFunction.sendP2PMessage(this.KEY_REQUEST,e),window.setTimeout(()=>{this._acceptedPeers.length<this._sdkFunction.opponentCount()&&this.send(e)},this.retryOnMiliseconds)}receive_command_KEY_REQUEST(e){null!=e&&(0==this._accepted&&(this._accepted=!0,this.target_process_request(e.pong,e.netMetadata)),this._sdkFunction.sendP2PMessage(this.KEY_ACCEPTED,{}))}receive_command_KEY_ACCEPTED(e){null!=e&&(-1==this._acceptedPeers.indexOf(e.netMetadata.senderId)&&this._acceptedPeers.push(e.netMetadata.senderId),this._acceptedPeers.length==this._sdkFunction.opponentCount()&&0==this._done&&(this._done=!0,this.actor_done()))}},cc._RF.pop()},{}],RemoteEmoticon:[function(e,t,n){"use strict";cc._RF.push(t,"ee4d8kzNshCgrp6KdpMmf9Q","RemoteEmoticon");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const s=e("./EmoticonController"),{ccclass:i,property:r}=cc._decorator;let a=(()=>{let e=class extends cc.Component{constructor(){super(...arguments),this.iconIndex=0}start(){const e=this;s.default.getInstance().onEmoticonLoaded(()=>{const t=s.default.getInstance().getIconPrefab(e.iconIndex);if(null!=t){const n=cc.instantiate(t);n.setParent(e.node),n.setPosition(new cc.Vec2(0,0))}})}};return o([r],e.prototype,"iconIndex",void 0),e=o([i],e)})();n.default=a,cc._RF.pop()},{"./EmoticonController":"EmoticonController"}],SDKEngine:[function(e,t,n){"use strict";cc._RF.push(t,"c02c2lVKeBCfJS3C6xR7ZWH","SDKEngine");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const{ccclass:s,property:i}=cc._decorator;let r=(()=>{class e{constructor(t,n){this.Id=-1,this.callback=null,this.intervalMiliseconds=-1,this.registerTime=-1,this.lastInvokedAt=-1,this.Id=e._idGenerator++,this.callback=t,this.intervalMiliseconds=n,this.registerTime=Date.now(),this.lastInvokedAt=Date.now()}}return e._idGenerator=0,e})(),a=(()=>{var e;let t=e=class extends cc.Component{constructor(){super(...arguments),this._timeOutEvents=new Array,this._intervalEvents=new Array}static getInstance(){return this._instance}static setInstance(e){this._instance=e}onLoad(){e._instance=this}setTimeout(e,t){this._timeOutEvents.push(new class{constructor(e,t){this.callback=null,this.timeOutMiliseconds=-1,this.registerTime=-1,this.callback=e,this.timeOutMiliseconds=t,this.registerTime=Date.now()}}(e,t))}setInterval(e,t){const n=new r(e,t);return this._intervalEvents.push(n),n.Id}removeInterval(e){for(var t=this._intervalEvents.length-1;t>=0;t--)if(this._intervalEvents[t].Id==e)return void this._intervalEvents.splice(t,1)}update(e){if(this._timeOutEvents.length>0)for(var t=this._timeOutEvents.length-1;t>=0;t--)if(Date.now()-this._timeOutEvents[t].registerTime>=this._timeOutEvents[t].timeOutMiliseconds){const e=this._timeOutEvents[t];this._timeOutEvents.splice(t,1),e.callback()}if(this._intervalEvents.length>0)for(t=this._intervalEvents.length-1;t>=0;t--)Date.now()-this._intervalEvents[t].lastInvokedAt>=this._intervalEvents[t].intervalMiliseconds&&(this._intervalEvents[t].lastInvokedAt=this._intervalEvents[t].lastInvokedAt+this._intervalEvents[t].intervalMiliseconds,this._intervalEvents[t].callback())}};return t._instance=null,t=e=o([s],t)})();n.default=a,cc._RF.pop()},{}],ScoreController:[function(e,t,n){"use strict";cc._RF.push(t,"99018DcdVZPaYS3P/iFBfKv","ScoreController");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const s=e("../hcg-core/Sound/SoundManager"),i=e("../hcg-core/UI/HCG_GameManager"),r=e("../hcg-core/UI/HCG_ScoreComboSound"),{ccclass:a,property:c}=cc._decorator;let l=(()=>{let e=class extends cc.Component{constructor(){super(...arguments),this.combo=0,this.score=0,this.scorePrefab=null,this.scoreLabel=null,this.comboLabel=null,this.comboContainer=null,this.scoreContainer=[],this.tempNum=0}addScore(){this.combo++,this.score+=this.combo,r.default.instance.PlaySoundCombo(this.combo),this.scoreLabel.string=this.score.toString(),this.comboLabel.string=this.combo.toString(),this.comboLabel.node.parent.active=this.combo>=2,this.combo>=2&&(this.comboContainer.scale=0,cc.tween(this.comboContainer).to(.15,{scale:1},{easing:"backOut"}).start()),this.showScoreDisplay(this.combo),s.default.getInstance().PlayScoreIncreaseSFX(),i.default.instance.updatePlayerScore(this.score)}deductScore(){this.comboBreak(),this.score--,this.score<0&&(this.score=0),this.scoreLabel.string=this.score.toString(),this.comboLabel.string=this.combo.toString(),this.comboLabel.node.parent.active=this.combo>=2,this.showScoreDisplay(-1),s.default.getInstance().PlayScoreDecreaseSFX(),i.default.instance.updatePlayerScore(this.score)}comboBreak(){this.combo=0,this.comboLabel.node.parent.active=this.combo>=2}showScoreDisplay(e){let t=cc.instantiate(this.scorePrefab);e<0?(t.color=cc.Color.RED,t.getComponent(cc.Label).string=e.toString()):t.getComponent(cc.Label).string="+"+e.toString(),t.setParent(this.scoreContainer[this.tempNum%2]),this.tempNum++,cc.tween(t).by(1,{position:cc.v2(0,100)}).then(cc.fadeOut(.5)).removeSelf().start()}};return o([c(cc.Prefab)],e.prototype,"scorePrefab",void 0),o([c(cc.Label)],e.prototype,"scoreLabel",void 0),o([c(cc.Label)],e.prototype,"comboLabel",void 0),o([c(cc.Node)],e.prototype,"comboContainer",void 0),o([c(cc.Node)],e.prototype,"scoreContainer",void 0),e=o([a],e)})();n.default=l,cc._RF.pop()},{"../hcg-core/Sound/SoundManager":"SoundManager","../hcg-core/UI/HCG_GameManager":"HCG_GameManager","../hcg-core/UI/HCG_ScoreComboSound":"HCG_ScoreComboSound"}],SdkFunctions:[function(e,t,n){"use strict";cc._RF.push(t,"031c9DSFrdHTrPM0sH430qZ","SdkFunctions"),Object.defineProperty(n,"__esModule",{value:!0});const o=e("../utilities/PesudoRandom"),s=e("../utilities/Utils"),i=e("./PongMessage"),r=e("./SDKEngine");let a=(()=>{class e{constructor(){this._sdk=null,this._myPlayerData=null,this._isSinglePlayer=!1,this._isAsyncPVP=!1,this._sdkHandler=null,this._aesKey=null,this._eventMap=new Map,this._bulkMessages=new Array,this._bulkReady=!1,this._bulkDelegate=null,this._isHandShakeFactor=!1,this._handShakeFactorId=null,this._handShakedPeers=new Array,this._doneHandShakePong=null,this._spawnDefaultNodesPong=null,this._cooldownPongMessage=null,this._sessionId=null,this._hostId=null,this._isHost=!1,this._isDoneHandShake=!1,this._initializeNetworkNodes=!1,this._isSelfHandShaked=!1,this._isStartedGame=!1,this._roundTripTimes=new Array,this._maxPingStorage=3,this._pingInterval=3e3,this._timerHandlerId=-1,this._hostLastTick=-1,this._startedPingInterval=!1,this._networkedNodes=new Map,this._initializeWorldPongMessage=null,r.default.getInstance();const t=this;this._sdk=gpSDK,this._isSinglePlayer=this._sdk.isSinglePlayer(),this._isAsyncPVP=this._sdk.isAsyncPVP();let n=null;if(this._sdk.goPlaySDK.getCurrentPlayer(function(e){n=e}),this._myPlayerData=n,1==this.isRealTimeMultiplayer()){var a=this.myPlayerId();const e=this.getAllPlayers();for(var c=0;c<e.length;c++)e[c]>a&&(a=e[c]);if(this._handShakeFactorId=a,this._isHandShakeFactor=this.myPlayerId()==this._handShakeFactorId,1==this._isHandShakeFactor){this._sessionId=s.default.generateUUID();const t=Math.randomInt(0,1e5),n=new o.default(t);this._hostId=e[n.rangeInt(0,e.length)],this._isHost=this.myPlayerId()==this._hostId}}else this._handShakeFactorId=this.myPlayerId(),this._isHandShakeFactor=!0,this._hostId=this.myPlayerId(),this._isHost=!0;console.log("@@=> [SDKFunctions] MatchType: "+this._sdk.goPlaySDK.matchType),console.log("@@=> [SDKFunctions] isSinglePlayer: "+this.isSinglePlayer()),console.log("@@=> [SDKFunctions] isMultiplayer: "+this.isMultiplayer()),console.log("@@=> [SDKFunctions] isRealTimeMultiplayer: "+this.isRealTimeMultiplayer()),console.log("@@=> [SDKFunctions] isHandShakeFactor: "+this._isHandShakeFactor+", id: "+this._handShakeFactorId),this._sdk.sdkOnEvent=function(n,o,s){if(n==e.KEY_INGAME_DATA){const e=o.ingameKey;if(null!=e&&1==t._eventMap.has(e)){const n=t.deserializeData(o);t._eventMap.get(e)(n)}}else console.log("@@=> [SdkOnEvent] Unhandle message: "+n+", playerId: "+s)},this._sdk.updateOpponentScore=function(e,n,o){t._sdkHandler.OnOpponentScoreUpdated(e,o)},this.registerEvent(e.KEY_HAND_SHAKE_REQUEST,e=>this.receive_command_HAND_SHAKE_REQUEST(e)),this.registerEvent(e.KEY_HAND_SHAKE_ACCEPT,e=>this.receive_command_HAND_SHAKE_ACCEPT(e)),this.registerEvent(e.KEY_NETWORK_NODE_REASSIGN_OWNER,e=>this.receive_command_NETWORK_NODE_REASSIGN_OWNER(e)),this.registerEvent(e.KEY_NETWORK_NODE_DATA_CHANGED,e=>this.receive_command_NETWORK_NODE_DATA_CHANGED(e)),this.registerEvent(e.KEY_NETWORK_NODE_SPAWN_NEW_NODE,e=>this.receive_command_NETWORK_NODE_SPAWN_NEW_NODE(e)),this.registerEvent(e.KEY_NETWORK_NODE_DESTROY,e=>this.receive_command_NETWORK_NODE_DESTROY(e)),this.registerEvent(e.KEY_NETWORK_BULK_MESSAGES,e=>this.receive_command_NETWORK_BULK_MESSAGES(e)),this.registerEvent(e.KEY_NETWORK_NODE_REQUEST_DESTROY,e=>this.receive_command_KEY_NETWORK_NODE_REQUEST_DESTROY(e)),this._cooldownPongMessage=new i.default(this,300,e.KEY_START_COOLDOWN_TO_PLAY_REQUEST,e.KEY_START_COOLDOWN_TO_PLAY_ACCEPTED,(e,t)=>this.target_process_request_KEY_START_COOLDOWN_TO_PLAY_REQUEST(e,t),()=>{}),this._initializeWorldPongMessage=new i.default(this,1e3,e.KEY_INITIALIZE_GAME_WORLD_ON_COOLDOWN,e.KEY_INITIALIZE_GAME_WORLD_ON_COOLDOWN_ACCEPTED,(e,t)=>{console.log("@@=> receiveInitializeWorld: "+JSON.stringify(e)),this._sdkHandler.receive_command_INITIALIZE_GAME_WORLD_ON_COOLDOWN(e)},()=>{}),this._doneHandShakePong=new i.default(this,300,e.KEY_DONE_HAND_SHAKE_REQUEST,e.KEY_DONE_HAND_SHAKE_ACCEPTED,(e,t)=>this.target_process_request_KEY_DONE_HAND_SHAKE_REQUEST(e,t),()=>this.onHostDoneHandShake()),this._spawnDefaultNodesPong=new i.default(this,300,e.KEY_SPAWN_DEFAULT_NETWORK_NODES_REQUEST,e.KEY_SPAWN_DEFAULT_NETWORK_NODES_ACCEPTED,(e,t)=>this.target_process_KEY_SPAWN_DEFAULT_NETWORK_NODES_REQUEST(e,t),()=>this.startCooldownAndSendToPeers()),null==this._aesKey&&(this._aesKey=this.GetAESKey(),r.default.getInstance())}static getInstance(){return null==this._instance&&(console.log("@@ => [SDKFunction] Instance NULL"),this._instance=new e),this._instance}loadingExpiredAt(){return this._sdk.loadingExpiredAt()}RemainLoadingTime(){var e=this._sdk.loadingExpiredAt()-Date.now();return e=e<0?0:Math.round(e/1e3)}myPlayerId(){return null!=this._myPlayerData&&this._myPlayerData.id?this._myPlayerData.id:"MYPLAYER_EDITOR"}getMyPlayerID(){return this.myPlayerId()}myPlayerData(){return null!=this._myPlayerData&&this._myPlayerData.id?this._myPlayerData:{id:"MYPLAYER_EDITOR",name:"My player"}}opponentPlayerId(){const e=this.getOpponents();return 0==e.length?"OPPONENT_COMPUTER":e[0]}isSinglePlayer(){return this._isSinglePlayer}isAsyncPVP(){return this._isAsyncPVP}isMultiplayer(){return!this._isSinglePlayer}isRealTimeMultiplayer(){return 1==this.isMultiplayer()&&0==this.isAsyncPVP()}getOpponents(){return Object.keys(this._sdk.opponents)}opponentCount(){return this.getOpponents().length}getOpponentsData(){return Object.values(this._sdk.opponents)}getAllPlayers(){const e=this.getOpponents();return-1==e.indexOf(this.myPlayerId())&&e.push(this.myPlayerId()),e}isSpawner(){return this.isHost()}showOpponentProfile(e){this._sdk.showOpponentProfile(e)}receive_command_NETWORK_BULK_MESSAGES(e){if(null==e||null==e.bulk||0==e.bulk.length)return;const t=e.senderId,n=e.sessionId;for(var o=0;o<e.bulk.length;o++){const s=e.bulk[o],i=s.ingameKey;if(null!=i&&1==this._eventMap.has(i)){const e=this.deserializeBulkData(s,n,t);this._eventMap.get(i)(e)}}}setSDKHandler(e){this._sdkHandler=e,this._sdkHandler.OnSelfPlayerDataUpdated(this.myPlayerData());const t=this.getOpponentsData();null!=t&&t.length>0&&this._sdkHandler.OnOpponentUpdated(t[0])}readyToStartGame(){const e=this;1==this._isHandShakeFactor&&1==this.isRealTimeMultiplayer()&&(0==this._sdk.gameStarted?this._sdk.onOpponentsReady=function(){e.send_command_HAND_SHAKE_REQUEST_If_Factor()}:this.send_command_HAND_SHAKE_REQUEST_If_Factor()),console.log("@@=> Raise ready to start game!"),this._sdk.startGame(),0==this.isRealTimeMultiplayer()&&(this._isSelfHandShaked=!0,this._isDoneHandShake=!0,this._initializeNetworkNodes=!0,this.spawnDefaultNetworkNodesIfHost(),this.startGame())}sendCurrentScore(e){this._sdk.setScore(e)}abortGame(){this._sdk.goPlaySDK.abortGame(function(){},function(){}),this.MP_StopPingInterval(),null!=this._bulkDelegate&&(r.default.getInstance().unschedule(this._bulkDelegate),this._bulkDelegate=null)}triggerGameOver(){this._sdk.updateFinalScore(),this.MP_StopPingInterval(),null!=this._bulkDelegate&&(r.default.getInstance().unschedule(this._bulkDelegate),this._bulkDelegate=null)}registerEvent(e,t){this._eventMap.set(e,t)}removeEvent(e){this._eventMap.delete(e)}serializeData(e,t){return{senderId:this.myPlayerId(),timeTick:this.getTick(),sessionId:this._sessionId,p2p:t,ingameKey:e}}serializeBulkData(e,t){return{timeTick:this.getTick(),p2p:t,ingameKey:e}}deserializeData(e){if(null!=e){const t=e.p2p,n={timeTick:e.timeTick,senderId:e.senderId,sessionId:e.sessionId};if(null!=t)return t.timeTick=e.timeTick,t.netMetadata=n,t}return cc.warn("Received unknown p2p data"),null}deserializeBulkData(e,t,n){if(null!=e){const o=e.p2p,s={timeTick:e.timeTick,senderId:n,sessionId:t};if(null!=o)return o.timeTick=e.timeTick,o.netMetadata=s,o}return cc.warn("Received unknown p2p data"),null}sendP2PMessage(t,n){1==this._bulkReady?this._bulkMessages.push(this.serializeBulkData(t,n)):this._sdk.goPlaySDK.sendEvent(e.KEY_INGAME_DATA,this.serializeData(t,n))}sendAndSaveP2PMessage(t,n){this._sdk.goPlaySDK.sendEvent(e.KEY_INGAME_DATA,this.serializeData(t,n),!0)}simulateSendLaggyP2PMessage(t,n,o,s,i=!1){const r=this._bulkReady;var a=null;a=0==this._bulkReady?this.serializeData(o,s):this.serializeBulkData(o,s),cc.tween(t).delay(n).call(()=>{0==r?this._sdk.goPlaySDK.sendEvent(e.KEY_INGAME_DATA,a):this._bulkMessages.push(s)}).start()}startBulkMessages(){this._bulkReady=!0;const t=this;this._bulkDelegate=function(){if(null!=t._bulkMessages&&t._bulkMessages.length>0){const n=t.serializeData(e.KEY_NETWORK_BULK_MESSAGES,{senderId:t.myPlayerId(),sessionId:t._sessionId,bulk:t._bulkMessages});t._sdk.goPlaySDK.sendEvent(e.KEY_INGAME_DATA,n),t._bulkMessages.splice(0,t._bulkMessages.length)}},r.default.getInstance().schedule(this._bulkDelegate,.1)}get sessionId(){return this._sessionId}get hostId(){return this._hostId}isHost(){return this._isHost}send_command_HAND_SHAKE_REQUEST_If_Factor(){if(1==this._isHandShakeFactor){const t={sessionId:this._sessionId,hostId:this._hostId};this._isSelfHandShaked=!0,this.sendP2PMessage(e.KEY_HAND_SHAKE_REQUEST,t);let n=window.setInterval(()=>{1==this._isDoneHandShake?window.clearInterval(n):this.sendP2PMessage(e.KEY_HAND_SHAKE_REQUEST,t)},2e3)}}receive_command_HAND_SHAKE_REQUEST(t){if(null!=t&&0==this._isSelfHandShaked){this._isSelfHandShaked=!0,this._sessionId=t.sessionId,this._hostId=t.hostId,this._isHost=this.myPlayerId()==this._hostId,console.log("@@=> Retrieve sessionId: "+this._sessionId+", hostId: "+this._hostId);const n={peerId:this.myPlayerId(),sessionId:this._sessionId};this.sendP2PMessage(e.KEY_HAND_SHAKE_ACCEPT,n);let o=window.setInterval(()=>{1==this._isDoneHandShake?window.clearInterval(o):this.sendP2PMessage(e.KEY_HAND_SHAKE_ACCEPT,n)},2e3)}}receive_command_HAND_SHAKE_ACCEPT(e){if(null!=e&&1==this._isHandShakeFactor&&0==this._isDoneHandShake){const t=this.getOpponents();t.indexOf(e.peerId)>=0&&e.sessionId==this._sessionId&&(-1==this._handShakedPeers.indexOf(e.peerId)&&this._handShakedPeers.push(e.peerId),this._handShakedPeers.length==t.length&&(this._isDoneHandShake=!0,this._doneHandShakePong.sendPong({})))}}target_process_request_KEY_DONE_HAND_SHAKE_REQUEST(e,t){0==this._isDoneHandShake&&(this._isDoneHandShake=!0,this.onHostDoneHandShake())}onHostDoneHandShake(){if(1==this._isHost&&0==this._initializeNetworkNodes){this._initializeNetworkNodes=!0;const e=this.spawnDefaultNetworkNodesIfHost();1==this.isRealTimeMultiplayer()&&(this.MP_StartPingInterval(),this._spawnDefaultNodesPong.sendPong(e))}}target_process_KEY_SPAWN_DEFAULT_NETWORK_NODES_REQUEST(e,t){null!=e&&0==this._initializeNetworkNodes&&t.sessionId==this._sessionId&&(this._initializeNetworkNodes=!0,this._sdkHandler.MP_Client_AssignNetworkNodes(e))}startCooldownAndSendToPeers(){if(1==this._isHost&&1==this.isRealTimeMultiplayer()){this._cooldownPongMessage.sendPong({});const t=this;r.default.getInstance().setTimeout(()=>{t.startGame()},e.COOLDOWN_TO_START)}else this.startGame()}target_process_request_KEY_START_COOLDOWN_TO_PLAY_REQUEST(t,n){if(n.sessionId==this._sessionId){const t=e.COOLDOWN_TO_START-(this.getTick()-n.timeTick);if(t>0){const e=this;r.default.getInstance().setTimeout(()=>{e.startGame()},t)}else this.startGame()}}startGame(){0==this._isStartedGame&&(console.log("@@==> [startGame] isHost: "+this._isHost+", hostId: "+this._hostId),this._isStartedGame=!0,1==this.isRealTimeMultiplayer()&&this.startBulkMessages(),null!=this._sdkHandler?this._sdkHandler.OnOpponentsReady():console.log("@@=> No sdk handler has been bind! the game will not be started"))}getTick(){return this._isHost||-1==this._hostLastTick?Date.now():this._hostLastTick+(Date.now()-this._lastSyncLocalTime)}MP_StartPingInterval(){0==this._startedPingInterval&&(this._startedPingInterval=!0,this._hostLastTick=-1,1==this.isRealTimeMultiplayer()&&(this.registerEvent(e.KEY_PING,e=>this.handlePing(e)),this.sendPing(),this._timerHandlerId=setInterval(()=>this.sendPing(),this._pingInterval)))}MP_StopPingInterval(){1==this.isRealTimeMultiplayer()&&clearInterval(this._timerHandlerId)}getAveragePing(){if(this._roundTripTimes.length>0){var e=0;return this._roundTripTimes.forEach(t=>{e+=t}),e/this._roundTripTimes.length}return 0}getAverageSendTime(){return this.getAveragePing()/2}handlePing(t){if(null==t)return;const n=(new Date).getTime();if(t.senderId==this.myPlayerId()){const e=n-t.senderTime;this._roundTripTimes.push(e),this._roundTripTimes.length>this._maxPingStorage&&this._roundTripTimes.shift(),0==this._isHost&&(this._hostLastTick=Math.round(t.receiverTick+t.receiverLastPing/2),this._lastSyncLocalTime=Date.now())}else this.sendP2PMessage(e.KEY_PING,{senderTime:t.senderTime,senderTick:t.senderTick,senderId:t.senderId,receiverTick:this.getTick(),receiverLastPing:this.getAveragePing()})}sendPing(){const t=(new Date).getTime();this.sendP2PMessage(e.KEY_PING,{senderTime:t,senderTick:this.getTick(),senderId:this.myPlayerId()})}addNetworkNode(e){null!=e&&0==this._networkedNodes.has(e.networkedNodeID)&&this._networkedNodes.set(e.networkedNodeID,e)}removeNetworkNode(e){null!=e&&1==this._networkedNodes.has(e.networkedNodeID)&&this._networkedNodes.delete(e.networkedNodeID)}getNetworkNode(e){return null==e?null:1==this._networkedNodes.has(e)?this._networkedNodes.get(e):null}spawnDefaultNetworkNodesIfHost(){let e=[];if(1==this._isHost){const t=this._sdkHandler.MP_Host_AssignNetworkedNodes();for(let n of t)this.addNetworkNode(n),e.push(n.convertToData())}return e}send_command_NETWORK_NODE_REASSIGN_OWNER(t,n){1==this.isRealTimeMultiplayer()&&this.sendP2PMessage(e.KEY_NETWORK_NODE_REASSIGN_OWNER,{newOwnerId:t.ownerID,nodeId:t.networkedNodeID,nodeData:n})}receive_command_NETWORK_NODE_REASSIGN_OWNER(e){if(null!=e&&this._networkedNodes.has(e.nodeId)){const t=this._networkedNodes.get(e.nodeId);e.netMetadata.senderId!=t.ownerID&&e.netMetadata.senderId!=this._hostId||(t.ownerID=e.newOwnerID,t.updateFromData(e.nodeData,e.netMetadata.timeTick))}}send_command_NETWORK_NODE_DATA_CHANGED(t,n){1==this.isRealTimeMultiplayer()&&this.sendP2PMessage(e.KEY_NETWORK_NODE_DATA_CHANGED,{nodeId:t.networkedNodeID,nodeData:n})}receive_command_NETWORK_NODE_DATA_CHANGED(e){if(null!=e)if(this._networkedNodes.has(e.nodeId)){const t=this._networkedNodes.get(e.nodeId);e.netMetadata.senderId==t.ownerID&&t.updateFromData(e.nodeData,e.timeTick)}else console.log("@@=> node not found for update data change: "+e.nodeId)}send_command_NETWORK_NODE_SPAWN_NEW_NODE(...t){const n=[];t.forEach(e=>{e.generateNetworkID(),this.addNetworkNode(e),n.push({nodeId:e.networkedNodeID,ownerId:e.ownerID,prefabName:e.getPrefabNameKey(),nodeData:e.convertToData()})}),1==this.isRealTimeMultiplayer()&&this.sendP2PMessage(e.KEY_NETWORK_NODE_SPAWN_NEW_NODE,{nodesData:n})}receive_command_NETWORK_NODE_SPAWN_NEW_NODE(e){null!=e&&e.nodesData.forEach(t=>{if(0==this._networkedNodes.has(t.nodeId)){const n=this._sdkHandler.MP_OnInitializeNetworkedNode(t.prefabName);n.assignOwnerID(t.ownerId),n.setNetworkID(t.nodeId),this.addNetworkNode(n),n.updateFromData(t.nodeData,e.timeTick)}})}send_command_NETWORK_NODE_DESTROY(t){this.removeNetworkNode(t),1==this.isRealTimeMultiplayer()&&this.sendP2PMessage(e.KEY_NETWORK_NODE_DESTROY,{nodeId:t.networkedNodeID,ownerId:t.ownerID})}receive_command_NETWORK_NODE_DESTROY(e){if(null!=e)if(e.ownerId!=e.netMetadata.senderId&&e.netMetadata.senderId!=this._hostId||1!=this._networkedNodes.has(e.nodeId))console.log("@@=> failed to destroy node, auth or not found: "+e.nodeId);else{const t=this._networkedNodes.get(e.nodeId);this.removeNetworkNode(t),t.node.destroy()}}send_command_KEY_NETWORK_NODE_REQUEST_DESTROY(t){null!=t&&0!=this.isRealTimeMultiplayer()&&(0==t.hasAuthority()?this.sendP2PMessage(e.KEY_NETWORK_NODE_REQUEST_DESTROY,{nodeId:t.networkedNodeID,ownerId:t.ownerID}):console.log("@@=> invalid destroy request, the sender has full authority to destroy by them self."))}receive_command_KEY_NETWORK_NODE_REQUEST_DESTROY(e){if(null!=e){const t=this.getNetworkNode(e.nodeId);null!=t&&1==t.hasAuthority()&&this._sdkHandler.receive_command_KEY_NETWORK_NODE_REQUEST_DESTROY(t)}}EncryptDatas(e){let t=JSON.stringify(e),n=aesjs.utils.utf8.toBytes(t),o=new aesjs.ModeOfOperation.ctr(this._aesKey,new aesjs.Counter).encrypt(n);return aesjs.utils.hex.fromBytes(o)}DecryptDatas(e){if(null==e)return null;let t=aesjs.utils.hex.toBytes(e),n=new aesjs.ModeOfOperation.ctr(this._aesKey,new aesjs.Counter).decrypt(t),o=aesjs.utils.utf8.fromBytes(n),s=new Array;return s=JSON.parse(o)}GetAESKey(){let e=this._sdk.getAESKey();return null==e&&console.log("@@ => [SDKFunction] AES key NULL"),aesjs.utils.hex.toBytes(e)}SetGameStateData(e){let t=this.EncryptDatas(e);this._sdk.setGameState(t)}GetGameStateData(){let e=this._sdk.getGameState();return this.DecryptDatas(e)}send_command_INITIALIZE_GAME_WORLD_ON_COOLDOWN(e){1==this.isRealTimeMultiplayer()&&this._initializeWorldPongMessage.sendPong(e)}}return e.COOLDOWN_TO_START=500,e.KEY_INGAME_DATA=50,e.KEY_PING=1e5,e.KEY_EMOTICON=100001,e.KEY_HAND_SHAKE_REQUEST=100002,e.KEY_HAND_SHAKE_ACCEPT=100003,e.KEY_SPAWN_DEFAULT_NETWORK_NODES_REQUEST=100004,e.KEY_NETWORK_NODE_REASSIGN_OWNER=100005,e.KEY_NETWORK_NODE_DATA_CHANGED=100006,e.KEY_NETWORK_NODE_SPAWN_NEW_NODE=100007,e.KEY_NETWORK_NODE_DESTROY=100008,e.KEY_NETWORK_BULK_MESSAGES=100009,e.KEY_SPAWN_STATUS_ITEM=100010,e.KEY_START_COOLDOWN_TO_PLAY_REQUEST=100011,e.KEY_INITIALIZE_GAME_WORLD_ON_COOLDOWN=100012,e.KEY_INITIALIZE_GAME_WORLD_ON_COOLDOWN_ACCEPTED=100013,e.KEY_START_COOLDOWN_TO_PLAY_ACCEPTED=100014,e.KEY_DONE_HAND_SHAKE_REQUEST=100015,e.KEY_DONE_HAND_SHAKE_ACCEPTED=100016,e.KEY_SPAWN_DEFAULT_NETWORK_NODES_ACCEPTED=100017,e.KEY_NETWORK_NODE_REQUEST_DESTROY=100018,e._instance=null,e})();n.default=a,cc._RF.pop()},{"../utilities/PesudoRandom":"PesudoRandom","../utilities/Utils":"Utils","./PongMessage":"PongMessage","./SDKEngine":"SDKEngine"}],SetExtensions:[function(e,t,n){"use strict";cc._RF.push(t,"d82e7I5ToVF4Zg+tn9MBDub","SetExtensions"),Set.prototype.getRandom=function(){let e=Math.floor(Math.random()*this.size),t=0;for(let n of this)if(t++===e)return n},Set.prototype.convertToArray=function(){let e=[];return this.forEach(t=>{e.push(t)}),e},Set.prototype.getRandom_Old=function(){return Array.from(this).getRandom()},cc._RF.pop()},{}],Ship:[function(e,t,n){"use strict";cc._RF.push(t,"97040tfpzlLDquQWb/f0ofN","Ship");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const s=e("./GameController"),{ccclass:i,property:r}=cc._decorator;let a=(()=>{var e;let t=e=class extends cc.Component{constructor(){super(...arguments),this.bulletPrefab=null,this.bulletContainer=null,this.canShoot=!1}static getInstance(){return this._instance}shoot(){0!=s.default.getInstance().gameStarted&&1!=s.default.getInstance().isGameOver&&this.doShoot(!1,-1)}doShoot(e,t){let n=cc.instantiate(this.bulletPrefab);n.setParent(this.bulletContainer);const o=n.getComponent("Bullet");null!=o&&(o.fenzyMode=s.default.getInstance().isOnFenzyMode,o.hommingMissble=e,o.chaseIndex=t,o.initialize()),this.node.getChildByName("Firehit_texture").getComponent(cc.ParticleSystem).resetSystem()}onLoad(){e._instance=this,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)}onDestroy(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)}onKeyDown(e){}onKeyUp(e){switch(e.keyCode){case cc.macro.KEY.space:this.shoot()}}};return t._instance=null,o([r(cc.Prefab)],t.prototype,"bulletPrefab",void 0),o([r(cc.Node)],t.prototype,"bulletContainer",void 0),t=e=o([i],t)})();n.default=a,cc._RF.pop()},{"./GameController":"GameController"}],SoundManager:[function(e,t,n){"use strict";cc._RF.push(t,"e3eb1o2CLBIJbWkpdRzl9OX","SoundManager");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const s=e("../sdk/SdkFunctions"),{ccclass:i,property:r}=cc._decorator;let a=(()=>{var e;let t=e=class extends cc.Component{constructor(){super(...arguments),this.soundButton=null,this.muteIcon=null,this.gameIdentifier="PLATFORM_GAME_IDENTIFIER",this.defaultBGMusic=null,this.playMusicOnLoad=!0,this.defaultBGMusicLoop=!0,this.bgMusicVolumn=1,this.sfx_Button=null,this.sfx_ScoreIncrease=null,this.sfx_ScoreDecrease=null,this.sfx_CountDownNumber=null,this.sfx_CountDownStart=null,this._sources=new Array,this._isOn=!0,this._saveKey=null}static getInstance(){return this._instance}onLoad(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="SoundManager",t.handler="onClickOnOffSound",this.soundButton.clickEvents.push(t),e._instance=this,this._saveKey="SOUND_SETTING_"+this.gameIdentifier+"_"+s.default.getInstance().myPlayerId();var n=cc.sys.localStorage.getItem(this._saveKey);this._isOn=!0,void 0!=n&&null!=n&&"false"==n&&(this._isOn=!1)}start(){1==this.playMusicOnLoad&&null!=this.defaultBGMusic&&this.playMusic(this.defaultBGMusic,this.defaultBGMusicLoop),this.onOffSoundAndMusic(this._isOn)}onDestroy(){this.soundButton.clickEvents.slice(0,this.soundButton.clickEvents.length)}onClickOnOffSound(){this.PlayButtonSFX(),this._isOn=!this._isOn,this.onOffSoundAndMusic(this._isOn)}registerSource(e){null!=e&&this._sources.indexOf(e)<0&&(this._sources.push(e),e.mute=!this._isOn)}removeSource(e){if(null==e)return;const t=this._sources.indexOf(e);t>=0&&this._sources.splice(t,1)}playSound(e,t){let n=-1;return null!=e&&(n=cc.audioEngine.playEffect(e,t)),n}playMusic(e,t){null!=e&&cc.audioEngine.playMusic(e,t)}stopSound(e){null!=e&&-1!=e&&cc.audioEngine.stopEffect(e)}onOffSoundAndMusic(e){this._isOn=e,cc.sys.localStorage.setItem(this._saveKey,e),this.muteIcon.active=!e,1==e?(cc.audioEngine.setMusicVolume(this.bgMusicVolumn),cc.audioEngine.setEffectsVolume(1),this._sources.forEach(e=>{null!=e&&(e.mute=!1)})):(cc.audioEngine.setMusicVolume(0),cc.audioEngine.setEffectsVolume(0),this._sources.forEach(e=>{null!=e&&(e.mute=!0)}))}PlayButtonSFX(){this.playSound(this.sfx_Button,!1)}PlayScoreIncreaseSFX(){this.playSound(this.sfx_ScoreIncrease,!1)}PlayScoreDecreaseSFX(){this.playSound(this.sfx_ScoreDecrease,!1)}PlayCountDownNumberSFX(){this.playSound(this.sfx_CountDownNumber,!1)}PlayCountDownStartSFX(){this.playSound(this.sfx_CountDownStart,!1)}};return t._instance=null,o([r(cc.Button)],t.prototype,"soundButton",void 0),o([r(cc.Node)],t.prototype,"muteIcon",void 0),o([r],t.prototype,"gameIdentifier",void 0),o([r(cc.AudioClip)],t.prototype,"defaultBGMusic",void 0),o([r],t.prototype,"playMusicOnLoad",void 0),o([r],t.prototype,"defaultBGMusicLoop",void 0),o([r({range:[0,1],slide:!0})],t.prototype,"bgMusicVolumn",void 0),o([r(cc.AudioClip)],t.prototype,"sfx_Button",void 0),o([r(cc.AudioClip)],t.prototype,"sfx_ScoreIncrease",void 0),o([r(cc.AudioClip)],t.prototype,"sfx_ScoreDecrease",void 0),o([r(cc.AudioClip)],t.prototype,"sfx_CountDownNumber",void 0),o([r(cc.AudioClip)],t.prototype,"sfx_CountDownStart",void 0),t=e=o([i],t)})();n.default=a,cc._RF.pop()},{"../sdk/SdkFunctions":"SdkFunctions"}],StatusIcon:[function(e,t,n){"use strict";cc._RF.push(t,"3dd20zyggJBEYWF/nIiVaSg","StatusIcon");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const{ccclass:s,property:i}=cc._decorator;let r=(()=>{let e=class extends cc.Component{constructor(){super(...arguments),this.fillImage=null,this.iconImage=null,this.itemType=0}setTime(e,t){this.fillImage.fillRange=t/e}};return o([i(cc.Sprite)],e.prototype,"fillImage",void 0),o([i(cc.Sprite)],e.prototype,"iconImage",void 0),o([i],e.prototype,"itemType",void 0),e=o([s],e)})();n.default=r,cc._RF.pop()},{}],TestValidator:[function(e,t,n){"use strict";cc._RF.push(t,"5063cvHhQBHNKpIsn6tNohR","TestValidator");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const{ccclass:s,property:i}=cc._decorator;let r=(()=>{let e=class extends cc.Component{constructor(){super(...arguments),this._testData=[[0,0,{}],[2,19,[0,55,300]],[3,20,[0,55,300]],[2,21,[1,82.5,69]],[3,21,[1,82.5,69]],[2,21,[2,82.5,160]],[3,21,[2,82.5,160]],[2,22,[3,55,262]],[3,22,[3,55,262]],[2,24,[4,82.5,215]],[3,24,[4,82.5,215]],[2,24,[5,82.5,264]],[3,24,[5,82.5,264]],[2,25,[6,99,87]],[3,25,[6,99,87]],[2,26,[7,55,136]],[3,26,[7,55,136]],[2,26,[8,82.5,214]],[3,26,[8,82.5,214]],[2,27,[9,82.5,73]],[3,27,[9,82.5,73]],[3,1016,[0,55,300]],[3,1017,[1,82.5,69]],[3,1017,[2,82.5,160]],[3,1017,[3,55,262]],[3,1017,[4,82.5,215]],[3,1017,[5,82.5,264]],[3,1017,[6,99,87]],[3,1017,[7,55,136]],[3,1018,[8,82.5,214]],[3,1018,[9,82.5,73]],[6,1121,{}],[5,1769,[7,55,177.195,0]],[2,1769,[10,82.5,328]],[3,1769,[10,82.5,328]],[5,2273,[1,82.5,172.04250000000002,0]],[2,2273,[11,82.5,255]],[3,2273,[11,82.5,255]],[3,2784,[10,82.5,328]],[3,3284,[11,82.5,255]],[5,4371,[5,82.5,180.45749999999998,0]],[2,4371,[12,99,290]],[3,4371,[12,99,290]],[4,4786,[7]],[5,5026,[4,82.5,185.24749999999995,0]],[2,5030,[13,99,353]],[3,5030,[13,99,353]],[4,5286,[1]],[3,5386,[12,99,290]],[5,5542,[0,55,188.60000000000002,0]],[2,5543,[14,99,37]],[3,5544,[14,99,37]],[5,6039,[3,55,178.04500000000007,0]],[2,6039,[15,55,169]],[3,6040,[15,55,169]],[3,6053,[13,99,353]],[3,6556,[14,99,37]],[5,6659,[9,82.5,178.135,0]],[2,6659,[16,82.5,213]],[3,6659,[16,82.5,213]],[3,7055,[15,55,169]],[5,7090,[15,55,170.815,0]],[2,7090,[17,99,265]],[3,7090,[17,99,265]],[4,7388,[5]],[3,7672,[16,82.5,213]],[5,7975,[12,99,186.014,0]],[2,7976,[18,82.5,144]],[3,7976,[18,82.5,144]],[4,8055,[4]],[3,8105,[17,99,265]],[4,8556,[0]],[3,8990,[18,82.5,144]],[4,9057,[3]],[5,9358,[8,82.5,181.8850000000001,0]],[2,9359,[19,55,174]],[3,9359,[19,55,174]],[4,9675,[9]],[5,10034,[2,82.5,183.16000000000008,0]],[2,10035,[22,99,85]],[3,10035,[22,99,85]],[4,10108,[15]],[3,10374,[19,55,174]],[5,10979,[17,99,189.13,0]],[2,10980,[23,55,208]],[3,10980,[23,55,208]],[4,10992,[12]],[3,11042,[22,99,85]],[6,11828,{}],[3,11993,[23,55,208]],[4,12376,[8]],[6,12566,{}],[4,13045,[2]],[6,13129,{}],[5,13813,[18,82.5,181.73249999999996,0]],[2,13814,[25,82.5,262]],[3,13814,[25,82.5,262]],[4,13996,[17]],[3,14830,[25,82.5,262]],[5,15483,[11,82.5,181.25250000000005,0]],[2,15483,[27,99,192]],[3,15483,[27,99,192]],[6,16286,{}],[3,16498,[27,99,192]],[5,16804,[19,55,167.375,0]],[2,16805,[29,55,87]],[3,16806,[29,55,87]],[4,16835,[18]],[3,17818,[29,55,87]],[5,18392,[10,82.5,175.08249999999998,0]],[2,18394,[40,82.5,56]],[3,18394,[40,82.5,56]],[4,18501,[11]],[5,18987,[14,99,187.471,0]],[2,18988,[41,55,230]],[3,18988,[41,55,230]],[3,19402,[40,82.5,56]],[5,19454,[29,55,176.87,0]],[2,19454,[43,99,20]],[3,19454,[43,99,20]],[4,19827,[19]],[5,19932,[27,99,171.76800000000003,0]],[2,19933,[44,82.5,259]],[3,19933,[44,82.5,259]],[3,20016,[41,55,230]],[5,20161,[40,82.5,118.37,0]],[2,20161,[46,55,276]],[3,20161,[46,55,276]],[5,20234,[41,55,241.825,0]],[2,20235,[47,99,89]],[3,20235,[47,99,89]],[3,20482,[43,99,20]],[5,20750,[47,99,89,0]],[2,20751,[48,82.5,162]],[3,20751,[48,82.5,162]],[5,20834,[46,55,276,0]],[2,20834,[49,82.5,196]],[3,20834,[49,82.5,196]],[3,20948,[44,82.5,259]],[3,21181,[46,55,276]],[3,21249,[47,99,89]],[5,21311,[23,55,.37999999999999545,0]],[2,21312,[50,99,189]],[3,21312,[50,99,189]],[4,21414,[10]],[3,21755,[48,82.5,162]],[3,21839,[49,82.5,196]],[4,22005,[14]],[3,22322,[50,99,189]],[4,22472,[29]],[4,22940,[27]],[4,23173,[40]],[4,23240,[41]],[6,23675,{}],[4,23759,[47]],[5,23792,[6,99,181.52700000000004,0]],[2,23792,[55,82.5,249]],[3,23792,[55,82.5,249]],[4,23842,[46]],[4,24325,[23]],[6,24626,{}],[3,24808,[55,82.5,249]],[5,25694,[43,99,175.78999999999996,0]],[2,25694,[58,99,139]],[3,25694,[58,99,139]],[6,26231,{}],[6,26679,{}],[3,26710,[58,99,139]],[4,26810,[6]],[4,28711,[43]],[5,28747,[44,82.5,182.25250000000005,0]],[2,28747,[60,55,66]],[3,28747,[60,55,66]],[5,29414,[50,99,170.90999999999997,0]],[2,29415,[61,55,258]],[3,29415,[61,55,258]],[3,29763,[60,55,66]],[6,30015,{}],[3,30048,[13,-99,208.40599999999995]],[3,30048,[16,-82.5,258.9375]],[3,30048,[22,-99,166.4949999999999]],[3,30048,[25,-82.5,77.40250000000015]],[3,30048,[48,-82.5,126.09000000000003]],[3,30048,[49,-82.5,153.15999999999997]],[3,30048,[55,-82.5,321.2175]],[3,30048,[58,-99,109.363]],[3,30048,[60,-55,81.62]],[3,30048,[61,-55,258]],[3,30430,[61,-55,258]],[5,30999,[16,-82.5,180.64499999999998,0]],[2,31e3,[63,99,95]],[3,31e3,[63,-99,95]],[4,31766,[44]],[3,32015,[63,-99,95]],[4,32432,[50]],[5,33002,[58,-99,-182.786,0]],[2,33003,[65,99,335]],[3,33003,[65,-99,335]],[5,33872,[13,-99,-169.67500000000007,0]],[2,33873,[66,99,134]],[3,33874,[66,-99,134]],[4,34016,[16]],[3,34016,[65,-99,335]],[6,34319,{}],[5,34702,[60,-55,-174.24,0]],[2,34702,[68,99,328]],[3,34702,[68,-99,328]],[3,34885,[66,-99,134]],[3,35719,[68,-99,328]],[6,35770,{}],[4,36019,[58]],[6,36637,{}],[4,36886,[13]],[4,37720,[60]],[6,40274,{}],[6,41060,{}],[5,41960,[25,-82.5,-905.0899999999999,0]],[2,41960,[88,55,45]],[3,41960,[88,-55,45]],[5,42447,[48,-82.5,-896.3325,0]],[2,42448,[89,55,314]],[3,42448,[89,-55,314]],[3,42975,[88,-55,45]],[6,43344,{}],[3,43459,[89,-55,314]],[6,44328,{}],[4,44977,[25]],[4,45461,[48]],[5,45665,[63,-99,-1255.9540000000002,0]],[2,45666,[92,99,140]],[3,45666,[92,-99,140]],[6,46184,{}],[6,46666,{}],[3,46680,[92,-99,140]],[6,47532,{}],[5,48016,[68,-99,-889.106,0]],[2,48016,[97,82.5,85]],[3,48016,[97,-82.5,85]],[6,48632,{}],[4,48681,[63]],[3,49032,[97,-82.5,85]],[6,49169,{}],[6,50318,{}],[6,50572,{}],[4,51034,[68]],[6,51319,{}],[5,51603,[49,-82.5,-1624.9625,0]],[2,51603,[100,55,359]],[3,51603,[100,-55,359]],[3,52620,[100,-55,359]],[4,56222,[49]],[3,61678,[22,99,-2964.7760000000003]],[3,61678,[55,82.5,-2288.175]],[3,61678,[61,55,-1460.585]],[3,61678,[65,99,-2403.4390000000003]],[3,61678,[66,99,-2518.4080000000004]],[3,61678,[88,55,-983.6100000000001]],[3,61678,[89,55,-687.99]],[3,61678,[92,99,-1344.703]],[3,61678,[97,82.5,-958.2124999999999]],[3,61678,[100,55,-139.13500000000005]],[6,68704,{}],[5,71023,[89,55,-174.125,0]],[2,71023,[113,82.5,69]],[3,71024,[113,82.5,69]],[5,71924,[61,55,-897.1650000000001,0]],[2,71925,[116,55,2]],[3,71925,[116,55,2]],[3,72039,[113,82.5,69]],[5,72676,[65,99,-1315.0330000000004,0]],[2,72677,[117,99,12]],[3,72677,[117,99,12]],[5,72825,[113,82.5,133.5975,0]],[2,72826,[118,82.5,181]],[3,72826,[118,82.5,181]],[3,72940,[116,55,2]],[5,72942,[118,82.5,181,0]],[2,72943,[119,82.5,147]],[3,72943,[119,82.5,147]],[5,73426,[66,99,-1355.6530000000002,0]],[2,73426,[120,82.5,244]],[3,73426,[120,82.5,244]],[5,73542,[120,82.5,244,0]],[2,73543,[121,55,337]],[3,73543,[121,55,337]],[3,73692,[117,99,12]],[3,73841,[118,82.5,181]],[3,73957,[119,82.5,147]],[4,74041,[89]],[5,74076,[121,55,337,0]],[2,74076,[122,99,1]],[3,74076,[122,99,1]],[3,74442,[120,82.5,244]],[3,74557,[121,55,337]],[4,74941,[61]],[3,75091,[122,99,1]],[4,75692,[65]],[4,75842,[113]],[4,75959,[118]],[4,76443,[66]],[4,76559,[120]],[4,77094,[121]],[1,91712,{}]]}onLoad(){const e=validatorFactory.createPewPewPewValidator();console.log(e.validate(this._testData))}};return e=o([s],e)})();n.default=r,cc._RF.pop()},{}],TimeSpan:[function(e,t,n){"use strict";cc._RF.push(t,"40d52wvObRET4kXVi78xlTH","TimeSpan"),Object.defineProperty(n,"__esModule",{value:!0}),n.TimeSpan=void 0;const o=1e3,s=60,i=60,r=24,a=o*s,c=a*i,l=c*r,d=7*l;class h{constructor(e=0){this._seconds=0,this._minutes=0,this._hours=0,this._days=0,this.milliseconds=e}static Subtract(e,t){return new h(e-t)}static Day(){return new h(l)}static Hour(){return new h(c)}static Week(){return new h(d)}static Month(){let e=new Date,t=new Date;return t.setMonth(t.getMonth()-1),new h(e-t)}addTo(e){return console.log("add "+this.totalMilliSeconds,this),e.setMilliseconds(e.getMilliseconds()+this.totalMilliSeconds),e}subtructFrom(e){return e.setMilliseconds(e.getMilliseconds()-this.totalMilliSeconds),e}get days(){return this._days}set days(e){isNaN(e)&&(e=0),this._days=e,this.calcMilliSeconds()}get hours(){return this._hours}set hours(e){isNaN(e)&&(e=0),this._hours=e,this.calcMilliSeconds()}get minutes(){return this._minutes}set minutes(e){isNaN(e)&&(e=0),this._minutes=e,this.calcMilliSeconds()}get seconds(){return this._seconds}set seconds(e){this._seconds=e,this.calcMilliSeconds()}get milliseconds(){return this._milliseconds}set milliseconds(e){isNaN(e)&&(e=0),this._milliseconds=e,this.calcMilliSeconds()}get totalMilliSeconds(){return this._totalMilliSeconds}get totalSeconds(){return Math.round(this._totalMilliSeconds/o)}get totalMinutes(){return Math.round(this._totalMilliSeconds/a)}get totalHours(){return Math.round(this._totalMilliSeconds/c)}roundValue(e,t){return{modulu:e%t,addition:Math.floor(e/t)}}calcMilliSeconds(){let e=this.roundValue(this._milliseconds,o);this._milliseconds=e.modulu,this._seconds+=e.addition;let t=this.roundValue(this._seconds,s);this._seconds=t.modulu,this._minutes+=t.addition;let n=this.roundValue(this._minutes,i);this._minutes=n.modulu,this._hours+=n.addition;let d=this.roundValue(this._hours,r);this._hours=d.modulu,this._days+=d.addition,this._totalMilliSeconds=this.days*l+this.hours*c+this.minutes*a+this.seconds*o+this.milliseconds}}n.TimeSpan=h,cc._RF.pop()},{}],Utils:[function(e,t,n){"use strict";cc._RF.push(t,"71893PFl7lMcY5u62wcT8n0","Utils");var o=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const{ccclass:s,property:i}=cc._decorator;let r=(()=>{let e=class extends cc.Component{static resetIdGenerator(){this._idGenerator=0}static getUniqueId(){return this._idGenerator++}static secondToMinute(e){let t,n;return(t=Math.floor(e/60))+":"+(n=("0"+Math.floor(e>=60?e-60:e)).slice(-2))}static calculatePosFromAngleRadius(e,t){let n=cc.misc.degreesToRadians(t),o=e*Math.sin(n),s=e*Math.cos(n);return cc.v2(o,s)}static getRandom(e,t=0){return Math.floor(Math.random()*(e-t)+t)}static getRandomInt(e,t){return Math.floor(Math.random()*Math.floor(t-e))+e}static getRandomFloat(e,t=0){return Math.random()*(e-t)+t}static getRandomCollectionObject(e){let t=Math.floor(Math.random()*e.size),n=0;for(let o of e.keys())if(n++===t)return o}static getRandomArrayObject(e){let t=Math.floor(Math.random()*e.length),n=0;for(var o of e)if(n++===t)return o}static stringToVector(e){return new cc.Vec2(Number(e.split(",")[0]),Number(e.split(",")[1]))}static vectorToString(e){return e.x+","+e.y}static shuffleArray(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}}static getWorldPosition(e,t=this.LEFT,n=this.BOTTOM){if(e){let i=cc.mat4(),r=new cc.Vec3;e.getWorldMatrix(i).getTranslation(r);var o=r.x-e.width*e.anchorX,s=r.y-e.height*e.anchorY;return t==this.RIGHT?o+=e.width:t==this.CENTER&&(o+=e.width/2),n==this.TOP?s+=e.height:t==this.CENTER&&(s+=e.height/2),cc.v2(o,s)}}static getSimpleWorldPosition(e,t=this.LEFT,n=this.BOTTOM){const o=this.getWorldPosition(e,t,n);return{x:o.x,y:o.y,z:0}}static getPosition(e,t=this.LEFT,n=this.BOTTOM){var o=e.x-e.width*e.anchorX,s=e.y-e.height*e.anchorY;return t==this.RIGHT?o+=e.width:t==this.CENTER&&(o+=e.width/2),n==this.TOP?s+=e.height:t==this.CENTER&&(s+=e.height/2),cc.v2(o,s)}static removeFromArray(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}static clearArray(e){e.length=0}static flipCoin(){return this.random(0,1e4)>5e3}static random(e,t){return Math.floor(Math.random()*(t-e+1)+e)}static randomSign(){return this.random(0,10)>5?1:-1}static getDiagonalDistance(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(Math.abs(e.y-t.y),2))}static setMaxSize(e,t,n){var o=1;e.width>t&&(o=t/e.width),e.height>n&&(o=Math.min(o,n/e.height)),e.setContentSize(e.width*o,e.height*o)}static formatTime(e){let t=Math.floor(e/60),n=Math.floor(e-60*t);return t.toLocaleString(void 0,{minimumIntegerDigits:2})+":"+n.toLocaleString(void 0,{minimumIntegerDigits:2})}static loadImageFromURL(e,t,n=null){cc.assetManager.loadRemote(t,{ext:".png"},(t,o)=>{if(!t){let t=new cc.SpriteFrame(o);if(e.spriteFrame=t,n){let o=t.getOriginalSize(),s=1;(o.height>n.height||o.width>n.width)&&(s=Math.max(n.height/o.height,n.width/o.width)),e.node.setContentSize(o.width*s,o.height*s)}}})}static adjustNodeToSize(e,t){}static RandomPointInRadius(e,t){var n=Math.random()*Math.PI*2;let o=Math.cos(n)*e,s=Math.sin(n)*e;return new cc.Vec2(t.x+o,t.y+s)}static Distance(e,t){let n=Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2);return Math.sqrt(n)}static changeParent(e,t){if(e.parent==t)return;let n=function(e){let t=e,n=t.angle;do{n+=(t=t.parent).angle}while(null!=t.parent);return n%=360},o=n(e)-n(t),s=e.convertToWorldSpaceAR(cc.v2(0,0)),i=t.convertToNodeSpaceAR(s);e.parent=t,e.position=i,e.angle=o}static generateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}static inverseLocalPosition(e,t){const n=e.parent.x,o=e.parent.y;e.setPosition(new cc.Vec2(n-t.x+n*e.anchorX,o-t.y+o*e.anchorY))}static getInversePosition(e){const t=e.parent.x,n=e.parent.y;e.setPosition(new cc.Vec2(t-e.position.x+t*e.anchorX,n-e.position.y+n*e.anchorY))}static calculateInversePosition(e,t){const n=e.parent.x,o=e.parent.y;return new cc.Vec2(n-t.x+n*e.anchorX,o-t.y+o*e.anchorY)}static round(e,t){return Math.round(t/e)*e}static getFloorKey(e,t){let n=Object.keys(e);n.sort(function(e,t){return parseInt(e)-parseInt(t)});for(let o=0;o<n.length;o++)if(t<=parseInt(n[o]))return e[n[o]];return null}};return e.LEFT=0,e.RIGHT=1,e.CENTER=2,e.TOP=3,e.BOTTOM=4,e._idGenerator=0,e=o([s],e)})();n.default=r,cc._RF.pop()},{}],use_reversed_rotateBy:[function(e,t,n){"use strict";cc._RF.push(t,"0f907e6UHJN2pa0nvHLYrON","use_reversed_rotateBy"),cc.RotateBy._reverse=!0,cc._RF.pop()},{}]},{},["BuffManager","ImplementEffects","Bullet","GameConfig","GameController","Globe","HommingMissbleDirections","ItemAlertContainer","Asteroid","AsteroidManager","ChickenShip","ChickenShipManager","Minion","MinionRoamingManager","OrbitRoaming","OrbitRoamingManager","ScoreController","Ship","AnglePositionCalculator","TestValidator","BuffEffect","BuffManagerBase","BuffTarget","InstantEffect","StatusIcon","EmoticonController","PlayerEmoticons","RemoteEmoticon","HelpController","SoundManager","CanvasMultiResoSupport","FPSHUD","FillScreen","HCG_CountdownToStart","HCG_GameController","HCG_GameManager","HCG_ScoreComboSound","HCG_ScoreController","HCG_UIController","AbstractSDK","GameElapasedTime","ISDKHandler","NetworkedNode","PongMessage","SDKEngine","SdkFunctions","ArrayExtensions","LBPositionConverter","MapExtensions","MathExtensions","PesudoRandom","SetExtensions","TimeSpan","Utils","use_reversed_rotateBy"]);